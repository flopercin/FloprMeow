<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MeowFlopr Casino</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        body {
            font-family: 'Press Start 2P', system-ui;
        }
        
        .neon-text {
            text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff, 0 0 40px #00ffff;
        }
        
        .slot-reel {
            transition: all 0.1s linear;
        }
        
        .explosion {
            animation: explode 0.6s forwards;
        }
        
        @keyframes explode {
            0% { transform: scale(0.5); opacity: 1; }
            50% { transform: scale(1.8); }
            100% { transform: scale(2.5); opacity: 0; }
        }
        
        .card-hover {
            transition: all 0.3s;
        }
        .card-hover:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 0 30px #ff00ff;
        }
        
        .reel {
            height: 180px;
            overflow: hidden;
            border: 4px solid #ffd700;
            background: #111;
        }
    </style>
</head>
<body class="bg-zinc-950 text-white overflow-x-hidden">
    <header class="bg-black border-b-4 border-pink-500 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <img src="main.jpg" alt="MeowFlopr" class="w-12 h-12 object-cover rounded-2xl border-2 border-pink-500">
                <div>
                    <h1 class="text-3xl font-bold neon-text tracking-widest">MEOWFLOPR</h1>
                    <p class="text-pink-400 text-xs -mt-1">CASINO</p>
                </div>
            </div>
            
            <div class="flex items-center gap-8">
                <nav class="flex gap-8 text-sm">
                    <a onclick="showSection('home')" class="cursor-pointer hover:text-pink-400 transition">–ì–õ–ê–í–ù–ê–Ø</a>
                    <a onclick="showSection('games')" class="cursor-pointer hover:text-pink-400 transition">–ò–ì–†–´</a>
                    <a onclick="showLeaderboard()" class="cursor-pointer hover:text-pink-400 transition">–¢–û–ü</a>
                    <a onclick="showBonus()" class="cursor-pointer hover:text-pink-400 transition">–ë–û–ù–£–°–´</a>
                </nav>
                
                <div class="flex items-center gap-6">
                    <div id="balance-display" class="bg-zinc-900 px-6 py-2 rounded-full border-2 border-emerald-400 flex items-center gap-2 font-bold">
                        <span class="text-emerald-400">‚ÇΩ</span>
                        <span id="balance">100000</span>
                    </div>
                    <div class="bg-zinc-900 px-5 py-2 rounded-full border border-purple-400 flex items-center gap-2">
                        <span class="text-purple-400">LVL</span>
                        <span id="user-level" class="font-bold text-purple-400">1</span>
                    </div>
                </div>
                
                <div onclick="showProfile()" class="flex items-center gap-2 cursor-pointer">
                    <div id="username-display" class="text-pink-400">–ò–ì–†–û–ö</div>
                    <div class="w-9 h-9 bg-pink-500 rounded-full flex items-center justify-center text-xl">üêæ</div>
                </div>
            </div>
        </div>
    </header>

    <section id="home" class="relative h-screen flex items-center justify-center bg-[radial-gradient(at_center,#4c1d95_0%,#000_70%)]">
        <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1518684079-3c830dcef090')] opacity-10 bg-cover"></div>
        <div class="text-center z-10 px-6">
            <h2 class="text-7xl font-bold neon-text mb-4">–î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨ –í</h2>
            <h1 class="text-8xl font-black tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400">MEOWFLOPR</h1>
            <p class="text-2xl mt-6 text-pink-300">–ì–¥–µ –∫–∞–∂–¥—ã–π —Å–ø–∏–Ω ‚Äî —ç—Ç–æ –∫–æ—Ç –≤ –º–µ—à–∫–µ... —Å –¥–µ–Ω—å–≥–∞–º–∏</p>
            
            <div class="mt-12 flex justify-center gap-6">
                <button onclick="showGames()" class="bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 px-16 py-6 text-2xl font-bold rounded-xl border-4 border-white transition">
                    –ò–ì–†–ê–¢–¨ –°–ï–ô–ß–ê–°
                </button>
            </div>
        </div>
    </section>

    <section id="games" class="max-w-7xl mx-auto px-6 py-16 hidden">
        <h2 class="text-5xl font-bold text-center mb-12 neon-text">–ò–ì–†–´</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
            <div onclick="openSlotsModal()" class="card-hover bg-zinc-900 rounded-3xl overflow-hidden border-4 border-yellow-400 cursor-pointer">
                <img src="https://cdn.nur.kz/images/1200x675/36135d7df8b99f1afe63116c264a570c.jpeg?version=1" class="w-full h-80 object-cover">
                <div class="p-8">
                    <h3 class="text-3xl font-bold">–°–õ–û–¢–´ –ú–ï–õ–°–¢–†–û–Ø</h3>
                    <p class="text-emerald-400 text-lg">–§—Ä—É–∫—Ç–æ–≤—ã–π –≤–∑—Ä—ã–≤</p>
                    <button class="mt-6 w-full bg-yellow-400 text-black py-4 font-bold text-xl rounded-2xl hover:bg-yellow-300">–ò–ì–†–ê–¢–¨</button>
                </div>
            </div>
            
            <div onclick="openEpsteinModal()" class="card-hover bg-zinc-900 rounded-3xl overflow-hidden border-4 border-red-500 cursor-pointer">
                <img src="https://nypost.com/wp-content/uploads/sites/2/2019/08/jeffrey-epstein-2-3.jpg?quality=75&strip=all" class="w-full h-80 object-cover">
                <div class="p-8">
                    <h3 class="text-3xl font-bold text-red-400">–†–ê–ó–ë–û–†–ö–ò –° –≠–ü–®–¢–ï–ô–ù–û–ú</h3>
                    <p class="text-amber-400 text-lg">–ê—Ä–±—É–∑—ã. –Ø–±–ª–æ–∫–∏. –ë–æ–º–±—ã.</p>
                    <button class="mt-6 w-full bg-red-600 py-4 font-bold text-xl rounded-2xl hover:bg-red-500">–†–ê–ó–ë–ò–†–ê–¢–¨–°–Ø</button>
                </div>
            </div>
            
            <div onclick="openMrBeastModal()" class="card-hover bg-zinc-900 rounded-3xl overflow-hidden border-4 border-cyan-400 cursor-pointer">
                <img src="mrbeast.jpg" class="w-full h-80 object-cover">
                <div class="p-8">
                    <h3 class="text-3xl font-bold text-cyan-400">–ü–û–î–™–Å–ú –£ –ú–ò–°–¢–ï–†–ê –ë–ò–°–¢–ê</h3>
                    <p class="text-sky-400 text-lg">–†–∞–∫–µ—Ç–∞ –∫ –º–∏–ª–ª–∏–∞—Ä–¥–∞–º</p>
                    <button class="mt-6 w-full bg-cyan-500 text-black py-4 font-bold text-xl rounded-2xl hover:bg-cyan-400">–õ–ï–¢–ï–¢–¨</button>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-black py-12 border-t-4 border-pink-500">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <div class="flex justify-center gap-8 text-2xl mb-6">
                <a href="https://t.me/MeowFlopr" target="_blank" class="hover:text-pink-400">t.me/MeowFlopr</a>
            </div>
            <p class="text-zinc-500 text-xs">–°–∞–π—Ç —Å–æ–∑–¥–∞–Ω –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ —à—É—Ç–∫—É. –ù–µ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–º –∫–∞–∑–∏–Ω–æ.<br>¬© 2026 MeowFlopr. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã (–Ω—É –ø–æ—á—Ç–∏).</p>
            <button onclick="showAgreement()" class="mt-8 text-xs underline text-zinc-400 hover:text-white">–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–û–ï –°–û–ì–õ–ê–®–ï–ù–ò–ï</button>
        </div>
    </footer>

    <!-- LOGIN MODAL -->
    <div id="login-modal" class="fixed inset-0 bg-black/80 flex items-center justify-center hidden z-[100]">
        <div class="bg-zinc-900 border-4 border-pink-500 rounded-3xl p-10 max-w-md w-full">
            <h2 class="text-4xl text-center mb-8">–î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨</h2>
            <input id="username-input" type="text" placeholder="–í–í–ï–î–ò –°–í–û–ô –ù–ò–ö" class="w-full bg-black border-2 border-pink-400 px-6 py-5 text-xl focus:outline-none focus:border-pink-500 rounded-2xl mb-6">
            <button onclick="login()" class="w-full bg-gradient-to-r from-pink-500 to-purple-600 py-6 text-2xl font-bold rounded-2xl">–í–û–ô–¢–ò –í –ö–ê–ó–ò–ù–û</button>
        </div>
    </div>

    <!-- SLOTS MODAL -->
    <div id="slots-modal" class="fixed inset-0 bg-black/90 flex items-center justify-center hidden z-[100]">
        <div class="bg-zinc-950 border-8 border-yellow-400 rounded-3xl p-8 max-w-4xl w-full">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-4xl">–°–õ–û–¢–´ –ú–ï–õ–°–¢–†–û–Ø</h2>
                <button onclick="closeSlotsModal()" class="text-4xl hover:text-pink-400">‚úï</button>
            </div>
            
            <div class="flex justify-center gap-4 mb-8">
                <div id="reel1" class="reel w-40 flex items-center justify-center text-8xl"></div>
                <div id="reel2" class="reel w-40 flex items-center justify-center text-8xl"></div>
                <div id="reel3" class="reel w-40 flex items-center justify-center text-8xl"></div>
            </div>
            
            <div class="flex flex-wrap justify-center gap-4 mb-8">
                <button onclick="setBet(100)" class="bet-btn px-8 py-3 bg-zinc-800 hover:bg-zinc-700 rounded-2xl">100 ‚ÇΩ</button>
                <button onclick="setBet(500)" class="bet-btn px-8 py-3 bg-zinc-800 hover:bg-zinc-700 rounded-2xl">500 ‚ÇΩ</button>
                <button onclick="setBet(1000)" class="bet-btn px-8 py-3 bg-zinc-800 hover:bg-zinc-700 rounded-2xl">1000 ‚ÇΩ</button>
                <button onclick="setBet(5000)" class="bet-btn px-8 py-3 bg-zinc-800 hover:bg-zinc-700 rounded-2xl">5000 ‚ÇΩ</button>
                <button id="custom-bet-slots-btn" onclick="showCustomBet('slots')" class="hidden px-8 py-3 bg-purple-600 hover:bg-purple-700 rounded-2xl">–ö–ê–°–¢–û–ú</button>
            </div>
            
            <div id="custom-bet-slots" class="hidden flex gap-3 justify-center items-center">
                <input id="custom-bet-input-slots" type="number" placeholder="–°—É–º–º–∞" class="bg-black border-2 border-purple-500 px-6 py-4 text-xl rounded-2xl w-48">
                <button onclick="setCustomBet('slots')" class="bg-purple-600 px-8 py-4 rounded-2xl">–£–°–¢–ê–ù–û–í–ò–¢–¨</button>
            </div>
            
            <div class="text-center">
                <div class="text-2xl mb-2">–°–¢–ê–í–ö–ê: <span id="current-bet" class="text-yellow-400">1000</span> ‚ÇΩ</div>
                <button onclick="spin()" id="spin-button" class="bg-gradient-to-r from-yellow-400 to-amber-500 text-black text-4xl font-bold px-20 py-8 rounded-3xl hover:scale-105 active:scale-95 transition">–°–ü–ò–ù!</button>
            </div>
            
            <div id="slots-result" class="text-center text-3xl mt-6 min-h-[60px]"></div>
        </div>
    </div>

    <!-- EPSTEIN MODAL -->
    <div id="epstein-modal" class="fixed inset-0 bg-black/90 flex items-center justify-center hidden z-[100]">
        <div class="bg-zinc-950 border-8 border-red-600 rounded-3xl p-8 max-w-5xl w-full">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-4xl text-red-400">–†–ê–ó–ë–û–†–ö–ò –° –≠–ü–®–¢–ï–ô–ù–û–ú</h2>
                <button onclick="closeEpsteinModal()" class="text-4xl hover:text-red-400">‚úï</button>
            </div>
            
            <div class="flex gap-8">
                <div class="w-80">
                    <div class="mb-4">–í–´–ë–ï–†–ò –°–¢–ê–í–ö–£</div>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="setEpsteinBet(500)" class="epstein-bet-btn py-6 bg-zinc-800 hover:bg-red-900 rounded-2xl">500 ‚ÇΩ</button>
                        <button onclick="setEpsteinBet(2000)" class="epstein-bet-btn py-6 bg-zinc-800 hover:bg-red-900 rounded-2xl">2000 ‚ÇΩ</button>
                        <button onclick="setEpsteinBet(5000)" class="epstein-bet-btn py-6 bg-zinc-800 hover:bg-red-900 rounded-2xl">5000 ‚ÇΩ</button>
                        <button onclick="setEpsteinBet(10000)" class="epstein-bet-btn py-6 bg-zinc-800 hover:bg-red-900 rounded-2xl">10000 ‚ÇΩ</button>
                    </div>
                    <button id="custom-bet-epstein-btn" onclick="showCustomBet('epstein')" class="hidden mt-4 w-full py-6 bg-purple-600 rounded-2xl">–ö–ê–°–¢–û–ú–ù–ê–Ø –°–¢–ê–í–ö–ê</button>
                    
                    <div id="custom-bet-epstein" class="hidden mt-4">
                        <input id="custom-bet-input-epstein" type="number" placeholder="–°—É–º–º–∞" class="w-full bg-black border-2 border-purple-500 px-6 py-5 rounded-2xl text-xl">
                        <button onclick="setCustomBet('epstein')" class="mt-3 w-full py-4 bg-purple-600 rounded-2xl">–ü–†–ò–ú–ï–ù–ò–¢–¨</button>
                    </div>
                    
                    <button onclick="startEpsteinGame()" id="start-epstein-btn" class="mt-8 w-full bg-red-600 py-8 text-2xl font-bold rounded-3xl">–ù–ê–ß–ê–¢–¨ –†–ê–ó–ë–û–†–ö–ò</button>
                    
                    <div id="epstein-winnings" class="mt-6 text-center text-3xl font-bold text-emerald-400 hidden">
                        –í–´–ò–ì–†–´–®: <span id="current-winnings">0</span> ‚ÇΩ
                    </div>
                    <button onclick="cashOutEpstein()" id="cashout-btn" class="mt-4 w-full bg-emerald-500 text-black py-6 text-xl font-bold rounded-3xl hidden">–ó–ê–ë–†–ê–¢–¨ –í–´–ò–ì–†–´–®</button>
                </div>
                
                <div class="flex-1">
                    <div id="epstein-grid" class="grid grid-cols-4 gap-3"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- MRBEAST CRASH MODAL -->
    <div id="mrbeast-modal" class="fixed inset-0 bg-black/90 flex items-center justify-center hidden z-[100]">
        <div class="bg-zinc-950 border-8 border-cyan-500 rounded-3xl p-8 max-w-4xl w-full">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-4xl text-cyan-400">–ü–û–î–™–Å–ú –£ –ú–ò–°–¢–ï–†–ê –ë–ò–°–¢–ê</h2>
                <button onclick="closeMrBeastModal()" class="text-4xl hover:text-cyan-400">‚úï</button>
            </div>
            
            <div class="flex gap-8">
                <div class="w-80">
                    <div class="mb-4">–°–¢–ê–í–ö–ê</div>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="setCrashBet(500)" class="crash-bet-btn py-6 bg-zinc-800 hover:bg-cyan-900 rounded-2xl">500 ‚ÇΩ</button>
                        <button onclick="setCrashBet(1000)" class="crash-bet-btn py-6 bg-zinc-800 hover:bg-cyan-900 rounded-2xl">1000 ‚ÇΩ</button>
                        <button onclick="setCrashBet(5000)" class="crash-bet-btn py-6 bg-zinc-800 hover:bg-cyan-900 rounded-2xl">5000 ‚ÇΩ</button>
                        <button onclick="setCrashBet(10000)" class="crash-bet-btn py-6 bg-zinc-800 hover:bg-cyan-900 rounded-2xl">10000 ‚ÇΩ</button>
                    </div>
                    <button id="custom-bet-crash-btn" onclick="showCustomBet('crash')" class="hidden mt-4 w-full py-6 bg-purple-600 rounded-2xl">–ö–ê–°–¢–û–ú</button>
                    
                    <div id="custom-bet-crash" class="hidden mt-4">
                        <input id="custom-bet-input-crash" type="number" placeholder="–°—É–º–º–∞" class="w-full bg-black border-2 border-purple-500 px-6 py-5 rounded-2xl text-xl">
                        <button onclick="setCustomBet('crash')" class="mt-3 w-full py-4 bg-purple-600 rounded-2xl">–ü–†–ò–ú–ï–ù–ò–¢–¨</button>
                    </div>
                    
                    <button onclick="startCrashGame()" id="start-crash-btn" class="mt-8 w-full bg-cyan-500 text-black py-8 text-2xl font-bold rounded-3xl">–ó–ê–ü–£–°–¢–ò–¢–¨ –†–ê–ö–ï–¢–£</button>
                    <button onclick="cashOutCrash()" id="cashout-crash-btn" class="hidden mt-4 w-full bg-emerald-500 text-black py-8 text-2xl font-bold rounded-3xl">–ó–ê–ë–†–ê–¢–¨ √ó<span id="current-multiplier">1.00</span></button>
                </div>
                
                <div class="flex-1 relative">
                    <canvas id="crash-canvas" width="620" height="320" class="bg-black rounded-3xl"></canvas>
                    <div id="rocket-container" class="absolute top-0 left-0 w-full h-full pointer-events-none">
                        <img id="rocket-img" src="raketmrbeast.jpg" class="absolute w-20 transition-all duration-75" style="left: 80px; bottom: 60px;">
                    </div>
                    <div id="multiplier-big" class="absolute top-8 right-8 text-7xl font-bold text-cyan-400 drop-shadow-2xl">1.00x</div>
                </div>
            </div>
        </div>
    </div>

    <!-- LEADERBOARD MODAL -->
    <div id="leaderboard-modal" class="fixed inset-0 bg-black/80 flex items-center justify-center hidden z-[100]">
        <div class="bg-zinc-900 border-4 border-pink-500 rounded-3xl p-10 max-w-md w-full">
            <h2 class="text-4xl text-center mb-8">–¢–û–ü –ò–ì–†–û–ö–û–í</h2>
            <table class="w-full text-left">
                <thead>
                    <tr class="border-b border-zinc-700">
                        <th class="py-3">–ú–ï–°–¢–û</th>
                        <th class="py-3">–ò–ì–†–û–ö</th>
                        <th class="py-3 text-right">–ë–ê–õ–ê–ù–°</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body">
                    <tr class="border-b border-zinc-700">
                        <td class="py-4">1</td>
                        <td class="py-4 font-bold text-yellow-400">MeowFlopr</td>
                        <td class="py-4 text-right font-bold">1 488 000 000 ‚ÇΩ</td>
                    </tr>
                </tbody>
            </table>
            <button onclick="closeLeaderboard()" class="mt-8 w-full py-5 bg-pink-500 text-black font-bold rounded-2xl">–ó–ê–ö–†–´–¢–¨</button>
        </div>
    </div>

    <!-- AGREEMENT MODAL -->
    <div id="agreement-modal" class="fixed inset-0 bg-black/80 flex items-center justify-center hidden z-[100]">
        <div class="bg-zinc-900 border border-zinc-700 rounded-3xl p-12 max-w-2xl w-full">
            <h2 class="text-3xl mb-6">–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–û–ï –°–û–ì–õ–ê–®–ï–ù–ò–ï</h2>
            <div class="text-zinc-400 leading-relaxed text-sm max-h-96 overflow-auto">
                <p>–≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–º—ã—à–ª–µ–Ω–Ω—ã–π —Å–∞–π—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤ —à—É—Ç–∫—É. –ù–∏–∫–∞–∫–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥ –∑–¥–µ—Å—å –Ω–µ –∫—Ä—É—Ç–∏—Ç—Å—è. –í—Å—ë –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –≤ —Ç–≤–æ—ë–º –±—Ä–∞—É–∑–µ—Ä–µ.</p>
                <p class="mt-4">–ò–≥—Ä–∞–π —Å–∫–æ–ª—å–∫–æ —Ö–æ—á–µ—à—å, –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–π —Å–∫–æ–ª—å–∫–æ —Ö–æ—á–µ—à—å ‚Äî –±–∞–ª–∞–Ω—Å –Ω–µ –Ω–∞—Å—Ç–æ—è—â–∏–π.</p>
                <p class="mt-8 text-pink-400">–° –ª—é–±–æ–≤—å—é, t.me/MeowFlopr</p>
            </div>
            <button onclick="closeAgreement()" class="mt-10 w-full py-5 bg-pink-500 text-black font-bold rounded-2xl">–ü–û–ù–Ø–õ, –ü–û–ì–ù–ê–õ–ò –ò–ì–†–ê–¢–¨</button>
        </div>
    </div>

    <script>
        let user = {
            username: "–ò–ì–†–û–ö",
            balance: 100000,
            level: 1,
            totalWon: 0
        }

        let currentBet = 1000
        let epsteinBet = 2000
        let epsteinWinnings = 0
        let epsteinCells = []
        let epsteinRevealed = 0
        let gameActive = false

        let crashBet = 1000
        let currentCrashMultiplier = 1.00
        let crashInterval = null
        let isFlying = false
        let crashTarget = 0
        let canvas, ctx

        const symbols = [
            { name: "banana", emoji: "üçå", url: "https://avatars.mds.yandex.net/get-mpic/5234083/img_id3506543352633991634.png/orig" },
            { name: "plum", emoji: "üçë", url: "https://main-cdn.sbermegamarket.ru/big1/hlr-system/-90/257/429/371/118/48/100032397594b0.jpg" },
            { name: "grape", emoji: "üçá", url: "https://avatars.mds.yandex.net/get-mpic/5145248/img_id4537599123360367823.png/orig" }
        ]

        function loadUser() {
            const saved = localStorage.getItem("meowflopr_user")
            if (saved) {
                user = JSON.parse(saved)
            }
            updateBalance()
            updateLevelDisplay()
            document.getElementById("username-display").textContent = user.username
        }

        function saveUser() {
            localStorage.setItem("meowflopr_user", JSON.stringify(user))
        }

        function updateBalance() {
            document.getElementById("balance").textContent = user.balance.toLocaleString("ru-RU")
        }

        function updateLevelDisplay() {
            document.getElementById("user-level").textContent = user.level
        }

        function updateLevel() {
            const newLevel = Math.floor(user.totalWon / 50000) + 1
            if (newLevel > user.level) {
                user.level = newLevel
                updateLevelDisplay()
            }
        }

        function login() {
            const input = document.getElementById("username-input").value.trim()
            if (input) user.username = input.toUpperCase()
            document.getElementById("username-display").textContent = user.username
            saveUser()
            document.getElementById("login-modal").classList.add("hidden")
        }

        function showSection(section) {
            document.getElementById("home").classList.add("hidden")
            document.getElementById("games").classList.add("hidden")
            if (section === "home") document.getElementById("home").classList.remove("hidden")
            if (section === "games") document.getElementById("games").classList.remove("hidden")
        }

        function showGames() {
            showSection("games")
        }

        function showLeaderboard() {
            document.getElementById("leaderboard-modal").classList.remove("hidden")
        }

        function closeLeaderboard() {
            document.getElementById("leaderboard-modal").classList.add("hidden")
        }

        function showProfile() {
            const newName = prompt("–ù–æ–≤—ã–π –Ω–∏–∫–Ω–µ–π–º:", user.username)
            if (newName && newName.trim()) {
                user.username = newName.trim().toUpperCase()
                document.getElementById("username-display").textContent = user.username
                saveUser()
            }
        }

        function showAgreement() {
            document.getElementById("agreement-modal").classList.remove("hidden")
        }

        function closeAgreement() {
            document.getElementById("agreement-modal").classList.add("hidden")
        }

        function showBonus() {
            const now = Date.now()
            if (now - (window.lastBonusTime || 0) < 60000) {
                alert("–°–ª–µ–¥—É—é—â–∏–π –±–æ–Ω—É—Å —á–µ—Ä–µ–∑ " + Math.ceil((60000 - (now - (window.lastBonusTime || 0))) / 1000) + " —Å–µ–∫")
                return
            }
            user.balance += 2000
            updateBalance()
            saveUser()
            window.lastBonusTime = now
            alert("üéâ +2000 ‚ÇΩ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–æ–µ–∫—Ç–∞!")
        }

        // ==================== SLOTS ====================
        function openSlotsModal() {
            if (user.balance < 100) {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!")
                return
            }
            document.getElementById("slots-modal").classList.remove("hidden")
            document.getElementById("custom-bet-slots-btn").classList.toggle("hidden", user.level < 15)
            resetReels()
        }

        function closeSlotsModal() {
            document.getElementById("slots-modal").classList.add("hidden")
        }

        function resetReels() {
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`reel${i}`).innerHTML = `<img src="${symbols[0].url}" class="w-32 h-32 object-contain">`
            }
        }

        function setBet(amount) {
            currentBet = amount
            document.getElementById("current-bet").textContent = amount
        }

        function showCustomBet(game) {
            if (game === "slots") {
                document.getElementById("custom-bet-slots").classList.toggle("hidden")
            } else if (game === "epstein") {
                document.getElementById("custom-bet-epstein").classList.toggle("hidden")
            } else if (game === "crash") {
                document.getElementById("custom-bet-crash").classList.toggle("hidden")
            }
        }

        function setCustomBet(game) {
            let input
            if (game === "slots") input = document.getElementById("custom-bet-input-slots")
            else if (game === "epstein") input = document.getElementById("custom-bet-input-epstein")
            else if (game === "crash") input = document.getElementById("custom-bet-input-crash")

            const amount = parseInt(input.value)
            if (amount && amount > 0) {
                if (game === "slots") {
                    currentBet = amount
                    document.getElementById("current-bet").textContent = amount
                } else if (game === "epstein") {
                    epsteinBet = amount
                } else if (game === "crash") {
                    crashBet = amount
                }
                alert("–°—Ç–∞–≤–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: " + amount + " ‚ÇΩ")
            }
        }

        function spin() {
            if (user.balance < currentBet) {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!")
                return
            }
            
            user.balance -= currentBet
            updateBalance()
            saveUser()
            
            const spinBtn = document.getElementById("spin-button")
            spinBtn.disabled = true
            document.getElementById("slots-result").innerHTML = ""
            
            const reels = [1,2,3]
            const finalSymbols = []
            
            reels.forEach((reelNum, index) => {
                let spins = 0
                const reelEl = document.getElementById(`reel${reelNum}`)
                
                const interval = setInterval(() => {
                    const randomSymbol = symbols[Math.floor(Math.random() * symbols.length)]
                    reelEl.innerHTML = `<img src="${randomSymbol.url}" class="w-32 h-32 object-contain">`
                    spins++
                    
                    if (spins > 15 + index * 5) {
                        clearInterval(interval)
                        const final = symbols[Math.floor(Math.random() * symbols.length)]
                        reelEl.innerHTML = `<img src="${final.url}" class="w-32 h-32 object-contain">`
                        finalSymbols.push(final)
                        
                        if (finalSymbols.length === 3) {
                            checkWin(finalSymbols)
                            spinBtn.disabled = false
                        }
                    }
                }, 70)
            })
        }

        function checkWin(finalSymbols) {
            const resultDiv = document.getElementById("slots-result")
            
            if (finalSymbols[0].name === finalSymbols[1].name && finalSymbols[1].name === finalSymbols[2].name) {
                const winAmount = Math.floor(currentBet * 15)
                user.balance += winAmount
                user.totalWon += winAmount
                resultDiv.innerHTML = `<span class="text-emerald-400">–î–ñ–ï–ö–ü–û–¢! +${winAmount} ‚ÇΩ</span>`
            } else if (finalSymbols[0].name === finalSymbols[1].name || 
                       finalSymbols[1].name === finalSymbols[2].name || 
                       finalSymbols[0].name === finalSymbols[2].name) {
                const winAmount = Math.floor(currentBet * 2.5)
                user.balance += winAmount
                user.totalWon += winAmount
                resultDiv.innerHTML = `<span class="text-emerald-400">–•–û–†–û–®–û! +${winAmount} ‚ÇΩ</span>`
            } else {
                resultDiv.innerHTML = `<span class="text-red-400">–ù–ï –í –≠–¢–û–¢ –†–ê–ó...</span>`
            }
            
            updateBalance()
            updateLevel()
            saveUser()
        }

        // ==================== EPSTEIN ====================
        function openEpsteinModal() {
            if (user.level < 5) {
                alert("–ò–≥—Ä–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Å 5 —É—Ä–æ–≤–Ω—è!")
                return
            }
            document.getElementById("epstein-modal").classList.remove("hidden")
            document.getElementById("custom-bet-epstein-btn").classList.toggle("hidden", user.level < 15)
            resetEpsteinGame()
        }

        function closeEpsteinModal() {
            document.getElementById("epstein-modal").classList.add("hidden")
            resetEpsteinGame()
        }

        function setEpsteinBet(amount) {
            epsteinBet = amount
            document.querySelectorAll(".epstein-bet-btn").forEach(b => b.classList.remove("bg-red-600", "text-white"))
        }

        function resetEpsteinGame() {
            gameActive = false
            epsteinWinnings = 0
            epsteinRevealed = 0
            document.getElementById("start-epstein-btn").disabled = false
            document.getElementById("epstein-grid").innerHTML = ""
        }

        function startEpsteinGame() {
            if (user.balance < epsteinBet) {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!")
                return
            }
            
            user.balance -= epsteinBet
            updateBalance()
            saveUser()
            
            gameActive = true
            epsteinWinnings = 0
            epsteinRevealed = 0
            
            document.getElementById("start-epstein-btn").disabled = true
            document.getElementById("epstein-winnings").classList.remove("hidden")
            document.getElementById("cashout-btn").classList.remove("hidden")
            document.getElementById("current-winnings").textContent = "0"
            
            const grid = document.getElementById("epstein-grid")
            grid.innerHTML = ""
            epsteinCells = []
            
            let cellTypes = Array(12).fill("safe").concat(Array(4).fill("bomb"))
            cellTypes = cellTypes.sort(() => Math.random() - 0.5)
            
            for (let i = 0; i < 16; i++) {
                const cell = document.createElement("div")
                cell.className = "aspect-square bg-zinc-800 border-4 border-zinc-700 rounded-2xl flex items-center justify-center text-4xl cursor-pointer hover:border-pink-400 transition"
                cell.dataset.type = cellTypes[i]
                cell.innerHTML = `<span class="text-5xl">?</span>`
                cell.onclick = () => revealCell(cell)
                grid.appendChild(cell)
                epsteinCells.push(cell)
            }
        }

        function revealCell(cell) {
            if (!gameActive || cell.dataset.revealed) return
            cell.dataset.revealed = "true"
            epsteinRevealed++
            
            if (cell.dataset.type === "bomb") {
                cell.innerHTML = `<span class="text-6xl explosion">üí•</span>`
                cell.classList.add("bg-red-900", "border-red-500")
                gameOverEpstein()
            } else {
                const prize = Math.floor(Math.random() * 12000) + 3000
                epsteinWinnings += prize
                
                const fruit = ["üçâ","üçé","üçû","üçá","üçå"][Math.floor(Math.random()*5)]
                cell.innerHTML = `<div class="text-center"><div class="text-5xl">${fruit}</div><div class="text-xs text-emerald-400">+${prize}</div></div>`
                cell.classList.add("bg-emerald-900", "border-emerald-400")
                
                document.getElementById("current-winnings").textContent = epsteinWinnings
            }
        }

        function gameOverEpstein() {
            gameActive = false
            setTimeout(() => {
                alert("–ë–£–ú! –≠–ø—à—Ç–µ–π–Ω –Ω–∞—à—ë–ª —Ç–µ–±—è.")
                closeEpsteinModal()
            }, 800)
        }

        function cashOutEpstein() {
            if (epsteinWinnings > 0) {
                user.balance += epsteinWinnings
                user.totalWon += epsteinWinnings
                updateBalance()
                updateLevel()
                saveUser()
                alert(`+${epsteinWinnings} ‚ÇΩ –Ω–∞ –±–∞–ª–∞–Ω—Å`)
            }
            closeEpsteinModal()
        }

        // ==================== MRBEAST CRASH ====================
        function openMrBeastModal() {
            if (user.level < 10) {
                alert("–ò–≥—Ä–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Å 10 —É—Ä–æ–≤–Ω—è!")
                return
            }
            document.getElementById("mrbeast-modal").classList.remove("hidden")
            document.getElementById("custom-bet-crash-btn").classList.toggle("hidden", user.level < 15)
            resetCrashGame()
        }

        function closeMrBeastModal() {
            document.getElementById("mrbeast-modal").classList.add("hidden")
            if (crashInterval) clearInterval(crashInterval)
        }

        function setCrashBet(amount) {
            crashBet = amount
        }

        function resetCrashGame() {
            if (crashInterval) clearInterval(crashInterval)
            isFlying = false
            currentCrashMultiplier = 1.00
            document.getElementById("start-crash-btn").classList.remove("hidden")
            document.getElementById("cashout-crash-btn").classList.add("hidden")
            document.getElementById("multiplier-big").textContent = "1.00x"
        }

        function startCrashGame() {
            if (user.balance < crashBet) {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!")
                return
            }
            
            user.balance -= crashBet
            updateBalance()
            saveUser()
            
            isFlying = true
            currentCrashMultiplier = 1.00
            document.getElementById("start-crash-btn").classList.add("hidden")
            document.getElementById("cashout-crash-btn").classList.remove("hidden")
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ—á–∫–∏ –∫—Ä–∞—à–∞
            const r = Math.random()
            if (r < 0.45) crashTarget = 1.1 + Math.random() * 1.4
            else if (r < 0.75) crashTarget = 2 + Math.random() * 4
            else if (r < 0.92) crashTarget = 6 + Math.random() * 12
            else crashTarget = 20 + Math.random() * 80
            
            canvas = document.getElementById("crash-canvas")
            ctx = canvas.getContext("2d")
            
            let x = 40
            let prevY = canvas.height - 40
            
            crashInterval = setInterval(() => {
                currentCrashMultiplier += 0.04 + currentCrashMultiplier * 0.008
                
                ctx.clearRect(0, 0, canvas.width, canvas.height)
                ctx.strokeStyle = "#22d3ee"
                ctx.lineWidth = 5
                ctx.shadowBlur = 20
                ctx.shadowColor = "#22d3ee"
                ctx.beginPath()
                ctx.moveTo(40, canvas.height - 40)
                
                for (let i = 40; i < x; i += 8) {
                    const progress = (i - 40) / (x - 40)
                    const y = canvas.height - 40 - (Math.pow(progress, 1.6) * (canvas.height - 100))
                    ctx.lineTo(i, y)
                }
                ctx.stroke()
                
                x += 7
                
                const rocket = document.getElementById("rocket-img")
                const progress = Math.min((currentCrashMultiplier - 1) / (crashTarget - 1), 1)
                rocket.style.bottom = (60 + progress * 220) + "px"
                
                document.getElementById("multiplier-big").textContent = currentCrashMultiplier.toFixed(2) + "x"
                document.getElementById("current-multiplier").textContent = currentCrashMultiplier.toFixed(2)
                
                if (currentCrashMultiplier >= crashTarget) {
                    clearInterval(crashInterval)
                    isFlying = false
                    document.getElementById("cashout-crash-btn").classList.add("hidden")
                    document.getElementById("start-crash-btn").classList.remove("hidden")
                    document.getElementById("multiplier-big").innerHTML = `<span class="text-red-500">CRASHED @ ${crashTarget.toFixed(2)}x</span>`
                    alert("–†–ê–ö–ï–¢–ê –£–ü–ê–õ–ê!")
                }
            }, 45)
        }

        function cashOutCrash() {
            if (!isFlying) return
            clearInterval(crashInterval)
            isFlying = false
            
            const winAmount = Math.floor(crashBet * currentCrashMultiplier)
            user.balance += winAmount
            user.totalWon += winAmount
            updateBalance()
            updateLevel()
            saveUser()
            
            alert(`–£–°–ü–ï–®–ù–´–ô –ü–û–î–™–Å–ú! +${winAmount} ‚ÇΩ (${currentCrashMultiplier.toFixed(2)}x)`)
            
            document.getElementById("cashout-crash-btn").classList.add("hidden")
            document.getElementById("start-crash-btn").classList.remove("hidden")
        }

        window.onload = function() {
            loadUser()
            
            if (!localStorage.getItem("meowflopr_user")) {
                document.getElementById("login-modal").classList.remove("hidden")
            }
            
            showSection("home")
        }
    </script>
</body>
</html>
