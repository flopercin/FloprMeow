<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MeowFlopr Casino</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        body {
            font-family: 'Press Start 2P', system-ui;
        }
        
        .neon-text {
            text-shadow: 0 0 10px #ff00ff,
                        0 0 20px #ff00ff,
                        0 0 40px #00ffff;
        }
        
        .slot-reel {
            transition: all 0.1s linear;
        }
        
        .explosion {
            animation: explode 0.6s forwards;
        }
        
        @keyframes explode {
            0% { transform: scale(0.5); opacity: 1; }
            50% { transform: scale(1.8); }
            100% { transform: scale(2.5); opacity: 0; }
        }
        
        .card-hover {
            transition: all 0.3s;
        }
        .card-hover:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 0 30px #ff00ff;
        }

        .card-locked {
            filter: grayscale(1);
            opacity: 0.7;
            cursor: not-allowed;
        }
        .card-locked:hover {
            transform: none;
            box-shadow: none;
        }
        
        .reel {
            height: 180px;
            overflow: hidden;
            border: 4px solid #ffd700;
            background: #111;
        }

        #rocket-canvas {
            border-bottom: 2px solid white;
            border-left: 2px solid white;
        }
    </style>
</head>
<body class="bg-zinc-950 text-white overflow-x-hidden">
    <header class="bg-black border-b-4 border-pink-500 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <img src="main.jpg" class="w-12 h-12 rounded-full border-2 border-pink-400 object-cover">
                <div>
                    <h1 class="text-3xl font-bold neon-text tracking-widest">MEOWFLOPR</h1>
                    <p class="text-pink-400 text-xs -mt-1">CASINO</p>
                </div>
            </div>
            
            <div class="flex items-center gap-8">
                <nav class="flex gap-6 text-xs md:text-sm">
                    <a onclick="showSection('home')" class="cursor-pointer hover:text-pink-400 transition">–ì–õ–ê–í–ù–ê–Ø</a>
                    <a onclick="showSection('games')" class="cursor-pointer hover:text-pink-400 transition">–ò–ì–†–´</a>
                    <a onclick="openLeaderboard()" class="cursor-pointer text-yellow-400 hover:text-yellow-200 transition">üèÜ –¢–û–ü</a>
                </nav>
                
                <div id="balance-display" class="bg-zinc-900 px-4 py-2 rounded-full border-2 border-emerald-400 flex items-center gap-2 font-bold text-xs md:text-sm">
                    <span class="text-emerald-400">‚ÇΩ</span>
                    <span id="balance">100000</span>
                </div>

                <div class="bg-zinc-900 px-4 py-2 rounded-full border-2 border-blue-400 flex items-center gap-2 font-bold text-xs">
                    <span class="text-blue-400">LVL</span>
                    <span id="level-display">1</span>
                </div>
                
                <div onclick="showProfile()" class="flex items-center gap-2 cursor-pointer hidden md:flex">
                    <div id="username-display" class="text-pink-400 text-xs">–ò–ì–†–û–ö</div>
                    <div class="w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center text-xs">üë§</div>
                </div>
            </div>
        </div>
    </header>

    <section id="home" class="relative h-screen flex items-center justify-center bg-[radial-gradient(at_center,#4c1d95_0%,#000_70%)]">
        <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1518684079-3c830dcef090')] opacity-10 bg-cover"></div>
        <div class="text-center z-10 px-6">
            <h2 class="text-4xl md:text-7xl font-bold neon-text mb-4">–î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨ –í</h2>
            <h1 class="text-5xl md:text-8xl font-black tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400">MEOWFLOPR</h1>
            <p class="text-xl md:text-2xl mt-6 text-pink-300">–ì–¥–µ –∫–∞–∂–¥—ã–π —Å–ø–∏–Ω ‚Äî —ç—Ç–æ –∫–æ—Ç –≤ –º–µ—à–∫–µ... —Å –¥–µ–Ω—å–≥–∞–º–∏</p>
            
            <div class="mt-12 flex justify-center gap-6">
                <button onclick="showGames()" 
                        class="bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 px-10 py-4 md:px-16 md:py-6 text-xl md:text-2xl font-bold rounded-xl border-4 border-white transition">
                    –ò–ì–†–ê–¢–¨ –°–ï–ô–ß–ê–°
                </button>
            </div>
            
            <div class="mt-16 text-xs text-zinc-500 flex justify-center gap-8">
                <div>18+</div>
                <div>–í—Å—ë –≤ —à—É—Ç–∫—É</div>
                <div>–ù–µ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫</div>
            </div>
        </div>
    </section>

    <section id="games" class="max-w-7xl mx-auto px-6 py-16 hidden">
        <h2 class="text-5xl font-bold text-center mb-12 neon-text">–ò–ì–†–´</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div onclick="openSlotsModal()" 
                 class="card-hover bg-zinc-900 rounded-3xl overflow-hidden border-4 border-yellow-400 cursor-pointer relative">
                <img src="https://cdn.nur.kz/images/1200x675/36135d7df8b99f1afe63116c264a570c.jpeg?version=1" 
                     class="w-full h-64 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-bold mb-2">–°–õ–û–¢–´ –ú–ï–õ–°–¢–†–û–Ø</h3>
                    <p class="text-emerald-400 text-xs mb-4">–°–ª–æ–∂–Ω–æ, –Ω–æ —á–µ—Å—Ç–Ω–æ</p>
                    <div class="flex justify-between items-center">
                        <span class="text-xs text-zinc-500">LVL 1+</span>
                        <div class="text-2xl">üçåüçá</div>
                    </div>
                </div>
            </div>
            
            <div onclick="tryOpenEpstein()" id="game-card-epstein"
                 class="card-hover bg-zinc-900 rounded-3xl overflow-hidden border-4 border-red-500 cursor-pointer relative">
                <div id="lock-epstein" class="absolute inset-0 bg-black/60 z-20 flex items-center justify-center flex-col hidden">
                    <div class="text-6xl mb-2">üîí</div>
                    <div class="text-red-500 font-bold">–ù–£–ñ–ï–ù 5 –£–†–û–í–ï–ù–¨</div>
                </div>
                <img src="https://nypost.com/wp-content/uploads/sites/2/2019/08/jeffrey-epstein-2-3.jpg?quality=75&strip=all" 
                     class="w-full h-64 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-bold text-red-400 mb-2">–†–ê–ó–ë–û–†–ö–ò –° –≠–ü–®–¢–ï–ô–ù–û–ú</h3>
                    <p class="text-amber-400 text-xs mb-4">–ö—Ä—É–ø–Ω—ã–µ —Å—Ç–∞–≤–∫–∏, –∫—Ä—É–ø–Ω—ã–µ –≤—ã–∏–≥—Ä—ã—à–∏</p>
                    <div class="flex justify-between items-center">
                        <span class="text-xs text-zinc-500">LVL 5+</span>
                        <div class="text-2xl">üí£üçâ</div>
                    </div>
                </div>
            </div>

            <div onclick="tryOpenBeast()" id="game-card-beast"
                 class="card-hover bg-zinc-900 rounded-3xl overflow-hidden border-4 border-blue-500 cursor-pointer relative">
                <div id="lock-beast" class="absolute inset-0 bg-black/60 z-20 flex items-center justify-center flex-col hidden">
                    <div class="text-6xl mb-2">üîí</div>
                    <div class="text-blue-500 font-bold">–ù–£–ñ–ï–ù 10 –£–†–û–í–ï–ù–¨</div>
                </div>
                <img src="mrbeast.jpg" class="w-full h-64 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-bold text-blue-400 mb-2">–ü–û–î–ù–Ø–¢–ò–ï –£ –ë–ò–°–¢–ê</h3>
                    <p class="text-cyan-400 text-xs mb-4">–£—Å–ø–µ–π –∑–∞–±—Ä–∞—Ç—å –¥–æ –∫—Ä–∞—à–∞</p>
                    <div class="flex justify-between items-center">
                        <span class="text-xs text-zinc-500">LVL 10+</span>
                        <div class="text-2xl">üöÄüìà</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-black py-12 border-t-4 border-pink-500 mt-12">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <div class="flex justify-center gap-8 text-2xl mb-6">
                <a href="https://t.me/MeowFlopr" target="_blank" class="hover:text-pink-400">t.me/MeowFlopr</a>
            </div>
            <p class="text-zinc-500 text-xs">–°–∞–π—Ç —Å–æ–∑–¥–∞–Ω –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ —à—É—Ç–∫—É. –ù–µ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–º –∫–∞–∑–∏–Ω–æ.<br>¬© 2026 MeowFlopr.</p>
            <button onclick="showAgreement()" class="mt-8 text-xs underline text-zinc-400 hover:text-white">–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–û–ï –°–û–ì–õ–ê–®–ï–ù–ò–ï</button>
        </div>
    </footer>

    <div id="login-modal" class="fixed inset-0 bg-black/80 flex items-center justify-center hidden z-[100]">
        <div class="bg-zinc-900 border-4 border-pink-500 rounded-3xl p-10 max-w-md w-full mx-4">
            <h2 class="text-2xl md:text-4xl text-center mb-8">–î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨</h2>
            <input id="username-input" type="text" placeholder="–í–í–ï–î–ò –°–í–û–ô –ù–ò–ö" class="w-full bg-black border-2 border-pink-400 px-6 py-5 text-xl focus:outline-none focus:border-pink-500 rounded-2xl mb-6">
            <button onclick="login()" class="w-full bg-gradient-to-r from-pink-500 to-purple-600 py-6 text-xl md:text-2xl font-bold rounded-2xl">–í–û–ô–¢–ò –í –ö–ê–ó–ò–ù–û</button>
        </div>
    </div>

    <div id="leaderboard-modal" class="fixed inset-0 bg-black/90 flex items-center justify-center hidden z-[100]">
        <div class="bg-zinc-900 border-4 border-yellow-400 rounded-3xl p-8 max-w-2xl w-full mx-4 relative">
            <button onclick="closeLeaderboard()" class="absolute top-4 right-6 text-4xl hover:text-yellow-400">‚úï</button>
            <h2 class="text-3xl text-center text-yellow-400 mb-8">–¢–û–ü –ë–û–ì–ê–¢–ï–ô–®–ò–•</h2>
            <div class="bg-black rounded-xl p-4 max-h-[60vh] overflow-y-auto">
                <div class="flex justify-between items-center border-b border-zinc-800 py-4">
                    <div class="flex items-center gap-4">
                        <span class="text-yellow-500 text-2xl">#1</span>
                        <span class="font-bold text-pink-500">MeowFlopr</span>
                        <span class="text-xs bg-pink-900 px-2 py-1 rounded">ADMIN</span>
                    </div>
                    <div class="text-emerald-400">1 488 000 000 ‚ÇΩ</div>
                </div>
                <div class="flex justify-between items-center border-b border-zinc-800 py-4 opacity-50">
                    <div class="flex items-center gap-4">
                        <span class="text-zinc-500 text-xl">#2</span>
                        <span>Mellstroy</span>
                    </div>
                    <div class="text-zinc-400">0 ‚ÇΩ (–°–ª–∏–ª)</div>
                </div>
            </div>
        </div>
    </div>

    <div id="slots-modal" class="fixed inset-0 bg-black/90 flex items-center justify-center hidden z-[100]">
        <div class="bg-zinc-950 border-8 border-yellow-400 rounded-3xl p-4 md:p-8 max-w-4xl w-full mx-2 overflow-y-auto max-h-screen">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl md:text-4xl">–°–õ–û–¢–´</h2>
                <button onclick="closeSlotsModal()" class="text-4xl hover:text-pink-400">‚úï</button>
            </div>
            
            <div class="flex justify-center gap-2 md:gap-4 mb-8">
                <div id="reel1" class="reel w-24 md:w-40 flex items-center justify-center text-6xl md:text-8xl"></div>
                <div id="reel2" class="reel w-24 md:w-40 flex items-center justify-center text-6xl md:text-8xl"></div>
                <div id="reel3" class="reel w-24 md:w-40 flex items-center justify-center text-6xl md:text-8xl"></div>
            </div>
            
            <div class="flex flex-wrap justify-center gap-2 md:gap-4 mb-4">
                <button onclick="setBet(100)" class="bet-btn px-4 py-2 bg-zinc-800 hover:bg-zinc-700 rounded-xl text-xs md:text-base">100 ‚ÇΩ</button>
                <button onclick="setBet(500)" class="bet-btn px-4 py-2 bg-zinc-800 hover:bg-zinc-700 rounded-xl text-xs md:text-base">500 ‚ÇΩ</button>
                <button onclick="setBet(1000)" class="bet-btn px-4 py-2 bg-zinc-800 hover:bg-zinc-700 rounded-xl text-xs md:text-base">1000 ‚ÇΩ</button>
                <button onclick="setBet(5000)" class="bet-btn px-4 py-2 bg-zinc-800 hover:bg-zinc-700 rounded-xl text-xs md:text-base">5000 ‚ÇΩ</button>
            </div>

            <div id="custom-bet-container-slots" class="hidden mb-6 flex justify-center">
                <input type="number" id="custom-bet-input-slots" placeholder="–°–≤–æ—è —Å—Ç–∞–≤–∫–∞..." class="bg-zinc-800 text-white p-3 rounded-xl border border-yellow-500 w-64 text-center">
            </div>
            
            <div class="text-center">
                <div class="text-xl md:text-2xl mb-2">–°–¢–ê–í–ö–ê: <span id="current-bet" class="text-yellow-400">1000</span> ‚ÇΩ</div>
                <button onclick="spin()" id="spin-button" class="bg-gradient-to-r from-yellow-400 to-amber-500 text-black text-2xl md:text-4xl font-bold px-12 md:px-20 py-4 md:py-8 rounded-3xl hover:scale-105 active:scale-95 transition">–°–ü–ò–ù!</button>
            </div>
            
            <div id="slots-result" class="text-center text-xl md:text-3xl mt-6 min-h-[60px]"></div>
        </div>
    </div>

    <div id="epstein-modal" class="fixed inset-0 bg-black/90 flex items-center justify-center hidden z-[100]">
        <div class="bg-zinc-950 border-8 border-red-600 rounded-3xl p-4 md:p-8 max-w-5xl w-full mx-2 overflow-y-auto max-h-screen">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl md:text-4xl text-red-400">–≠–ü–®–¢–ï–ô–ù</h2>
                <button onclick="closeEpsteinModal()" class="text-4xl hover:text-red-400">‚úï</button>
            </div>
            
            <div class="flex flex-col md:flex-row gap-8">
                <div class="w-full md:w-80">
                    <div class="mb-4 text-center md:text-left">–í–´–ë–ï–†–ò –°–¢–ê–í–ö–£</div>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <button onclick="setEpsteinBet(500)" class="epstein-bet-btn py-4 bg-zinc-800 hover:bg-red-900 rounded-2xl text-xs">500 ‚ÇΩ</button>
                        <button onclick="setEpsteinBet(2000)" class="epstein-bet-btn py-4 bg-zinc-800 hover:bg-red-900 rounded-2xl text-xs">2000 ‚ÇΩ</button>
                        <button onclick="setEpsteinBet(5000)" class="epstein-bet-btn py-4 bg-zinc-800 hover:bg-red-900 rounded-2xl text-xs">5000 ‚ÇΩ</button>
                        <button onclick="setEpsteinBet(10000)" class="epstein-bet-btn py-4 bg-zinc-800 hover:bg-red-900 rounded-2xl text-xs">10000 ‚ÇΩ</button>
                    </div>

                    <div id="custom-bet-container-epstein" class="hidden mb-4">
                        <input type="number" id="custom-bet-input-epstein" placeholder="–°–≤–æ—è —Å—Ç–∞–≤–∫–∞..." class="w-full bg-zinc-800 text-white p-3 rounded-xl border border-red-500 text-center">
                    </div>
                    
                    <button onclick="startEpsteinGame()" id="start-epstein-btn" class="w-full bg-red-600 py-4 md:py-8 text-xl md:text-2xl font-bold rounded-3xl disabled:opacity-50">–ù–ê–ß–ê–¢–¨</button>
                    
                    <div id="epstein-winnings" class="mt-6 text-center text-2xl md:text-3xl font-bold text-emerald-400 hidden">
                        +<span id="current-winnings">0</span> ‚ÇΩ
                    </div>
                    <button onclick="cashOutEpstein()" id="cashout-btn" class="mt-4 w-full bg-emerald-500 text-black py-4 text-xl font-bold rounded-3xl hidden">–ó–ê–ë–†–ê–¢–¨</button>
                </div>
                
                <div class="flex-1">
                    <div id="epstein-grid" class="grid grid-cols-4 gap-2 md:gap-3"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="beast-modal" class="fixed inset-0 bg-black/90 flex items-center justify-center hidden z-[100]">
        <div class="bg-zinc-950 border-8 border-blue-500 rounded-3xl p-4 md:p-8 max-w-4xl w-full mx-2">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl md:text-3xl text-blue-400">–ü–û–î–ù–Ø–¢–ò–ï –£ –ë–ò–°–¢–ê</h2>
                <button onclick="closeBeastModal()" class="text-4xl hover:text-blue-400">‚úï</button>
            </div>

            <div class="relative h-64 md:h-80 bg-zinc-900 rounded-xl mb-6 overflow-hidden">
                <canvas id="rocket-canvas" class="w-full h-full block"></canvas>
                <div class="absolute top-4 left-4 text-zinc-500 text-xs">x1.00</div>
                <div id="beast-multiplier" class="absolute inset-0 flex items-center justify-center text-6xl md:text-8xl font-black text-white/20 z-0">1.00x</div>
                <div id="beast-crashed-text" class="absolute inset-0 flex items-center justify-center text-5xl md:text-7xl font-black text-red-600 hidden z-10">CRASHED</div>
            </div>

            <div class="flex flex-col md:flex-row gap-4 items-center">
                <div class="w-full md:w-1/2">
                    <div class="flex gap-2 mb-2 overflow-x-auto">
                        <button onclick="setBeastBet(1000)" class="beast-bet-btn px-4 py-2 bg-zinc-800 rounded-lg text-xs whitespace-nowrap">1000 ‚ÇΩ</button>
                        <button onclick="setBeastBet(5000)" class="beast-bet-btn px-4 py-2 bg-zinc-800 rounded-lg text-xs whitespace-nowrap">5000 ‚ÇΩ</button>
                        <button onclick="setBeastBet(10000)" class="beast-bet-btn px-4 py-2 bg-zinc-800 rounded-lg text-xs whitespace-nowrap">10000 ‚ÇΩ</button>
                    </div>
                    <div id="custom-bet-container-beast" class="hidden mb-2">
                        <input type="number" id="custom-bet-input-beast" placeholder="–°—Ç–∞–≤–∫–∞..." class="w-full bg-zinc-800 text-white p-2 rounded-lg border border-blue-500">
                    </div>
                    <div class="text-sm">–°—Ç–∞–≤–∫–∞: <span id="beast-current-bet" class="text-blue-400">1000</span> ‚ÇΩ</div>
                </div>
                <div class="w-full md:w-1/2">
                    <button onclick="actionBeast()" id="beast-action-btn" class="w-full bg-blue-600 py-6 text-2xl font-bold rounded-xl hover:bg-blue-500 transition">–°–¢–ê–†–¢</button>
                </div>
            </div>
        </div>
    </div>

    <div id="agreement-modal" class="fixed inset-0 bg-black/80 flex items-center justify-center hidden z-[100]">
        <div class="bg-zinc-900 border border-zinc-700 rounded-3xl p-12 max-w-2xl w-full">
            <h2 class="text-3xl mb-6">–°–û–ì–õ–ê–®–ï–ù–ò–ï</h2>
            <div class="text-zinc-400 leading-relaxed text-sm max-h-96 overflow-auto">
                <p>–í—ã–º—ã—à–ª–µ–Ω–Ω—ã–π —Å–∞–π—Ç. –î–µ–Ω—å–≥–∏ –Ω–µ–Ω–∞—Å—Ç–æ—è—â–∏–µ.</p>
                <p class="mt-8 text-pink-400">t.me/MeowFlopr</p>
            </div>
            <button onclick="closeAgreement()" class="mt-10 w-full py-5 bg-pink-500 text-black font-bold rounded-2xl">–ü–û–ì–ù–ê–õ–ò</button>
        </div>
    </div>

    <script>
        let user = {
            username: "–ò–ì–†–û–ö",
            balance: 100000,
            xp: 0,
            level: 1
        }

        const symbols = [
            { name: "banana", emoji: "üçå", url: "https://avatars.mds.yandex.net/get-mpic/5234083/img_id3506543352633991634.png/orig" },
            { name: "plum", emoji: "üçë", url: "https://main-cdn.sbermegamarket.ru/big1/hlr-system/-90/257/429/371/118/48/100032397594b0.jpg" },
            { name: "grape", emoji: "üçá", url: "https://avatars.mds.yandex.net/get-mpic/5145248/img_id4537599123360367823.png/orig" },
            { name: "skull", emoji: "üíÄ", url: "https://em-content.zobj.net/source/microsoft-teams/337/skull_1f480.png" },
            { name: "lemon", emoji: "üçã", url: "https://em-content.zobj.net/source/microsoft-teams/337/lemon_1f34b.png" },
            { name: "cherry", emoji: "üçí", url: "https://em-content.zobj.net/source/microsoft-teams/337/cherries_1f352.png" }
        ]

        let currentBet = 1000
        
        let epsteinBet = 2000
        let epsteinWinnings = 0
        let epsteinGameActive = false
        
        let beastBet = 1000
        let beastGameActive = false
        let beastMultiplier = 1.00
        let beastCrashPoint = 0
        let beastInterval = null
        let beastRocketImg = new Image()
        beastRocketImg.src = 'raketmrbeast.jpg'

        function loadUser() {
            const saved = localStorage.getItem("meowflopr_user_v2")
            if (saved) {
                const parsed = JSON.parse(saved)
                user = { ...user, ...parsed }
            }
            updateBalance()
            document.getElementById("username-display").textContent = user.username
        }

        function saveUser() {
            localStorage.setItem("meowflopr_user_v2", JSON.stringify(user))
        }

        function updateBalance() {
            document.getElementById("balance").textContent = Math.floor(user.balance).toLocaleString("ru-RU")
            
            user.level = Math.floor(user.xp / 10000) + 1
            document.getElementById("level-display").textContent = user.level
            
            checkLocks()
            checkCustomBets()
        }

        function addXp(amount) {
            user.xp += Math.floor(amount / 100)
            updateBalance()
            saveUser()
        }

        function checkLocks() {
            const epsteinCard = document.getElementById("game-card-epstein")
            const lockEpstein = document.getElementById("lock-epstein")
            if (user.level < 5) {
                epsteinCard.classList.add("card-locked")
                lockEpstein.classList.remove("hidden")
            } else {
                epsteinCard.classList.remove("card-locked")
                lockEpstein.classList.add("hidden")
            }

            const beastCard = document.getElementById("game-card-beast")
            const lockBeast = document.getElementById("lock-beast")
            if (user.level < 10) {
                beastCard.classList.add("card-locked")
                lockBeast.classList.remove("hidden")
            } else {
                beastCard.classList.remove("card-locked")
                lockBeast.classList.add("hidden")
            }
        }

        function checkCustomBets() {
            if (user.level >= 15) {
                document.getElementById("custom-bet-container-slots").classList.remove("hidden")
                document.getElementById("custom-bet-container-epstein").classList.remove("hidden")
                document.getElementById("custom-bet-container-beast").classList.remove("hidden")
            }
        }

        function getBetAmount(inputInfo, btnVal) {
            if (user.level >= 15) {
                const inp = document.getElementById(inputInfo).value
                if (inp && parseInt(inp) > 0) return parseInt(inp)
            }
            return btnVal
        }

        function login() {
            const input = document.getElementById("username-input").value.trim()
            if (input) user.username = input.toUpperCase()
            document.getElementById("username-display").textContent = user.username
            saveUser()
            document.getElementById("login-modal").classList.add("hidden")
        }

        function showSection(section) {
            document.getElementById("home").classList.add("hidden")
            document.getElementById("games").classList.add("hidden")
            if (section === "home") document.getElementById("home").classList.remove("hidden")
            if (section === "games") document.getElementById("games").classList.remove("hidden")
        }

        function showGames() { showSection("games") }

        function openLeaderboard() { document.getElementById("leaderboard-modal").classList.remove("hidden") }
        function closeLeaderboard() { document.getElementById("leaderboard-modal").classList.add("hidden") }

        function openSlotsModal() {
            document.getElementById("slots-modal").classList.remove("hidden")
            resetReels()
        }
        function closeSlotsModal() { document.getElementById("slots-modal").classList.add("hidden") }

        function resetReels() {
            [1,2,3].forEach(i => document.getElementById(`reel${i}`).innerHTML = `<img src="${symbols[0].url}" class="w-24 h-24 object-contain">`)
        }

        function setBet(amount) {
            currentBet = amount
            document.getElementById("current-bet").textContent = amount
            if (user.level >= 15) document.getElementById("custom-bet-input-slots").value = ""
        }

        function spin() {
            const realBet = getBetAmount("custom-bet-input-slots", currentBet)
            
            if (user.balance < realBet) { alert("–ú–∞–ª–æ –¥–µ–Ω–µ–≥!"); return }
            
            user.balance -= realBet
            addXp(realBet)
            updateBalance()
            
            const spinBtn = document.getElementById("spin-button")
            spinBtn.disabled = true
            document.getElementById("slots-result").innerHTML = ""
            
            const finalSymbols = []
            
            [1,2,3].forEach((reelNum, index) => {
                let spins = 0
                const reelEl = document.getElementById(`reel${reelNum}`)
                const interval = setInterval(() => {
                    const rnd = symbols[Math.floor(Math.random() * symbols.length)]
                    reelEl.innerHTML = `<img src="${rnd.url}" class="w-24 h-24 object-contain">`
                    spins++
                    if (spins > 15 + index * 5) {
                        clearInterval(interval)
                        const final = symbols[Math.floor(Math.random() * symbols.length)]
                        reelEl.innerHTML = `<img src="${final.url}" class="w-24 h-24 object-contain">`
                        finalSymbols.push(final)
                        if (finalSymbols.length === 3) {
                            checkWin(finalSymbols, realBet)
                            spinBtn.disabled = false
                        }
                    }
                }, 60)
            })
        }

        function checkWin(final, bet) {
            const res = document.getElementById("slots-result")
            if (final[0].name === final[1].name && final[1].name === final[2].name) {
                const win = bet * 15
                user.balance += win
                res.innerHTML = `<span class="text-emerald-400">–î–ñ–ï–ö–ü–û–¢! +${win} ‚ÇΩ</span>`
            } else if (final[0].name === final[1].name || final[1].name === final[2].name || final[0].name === final[2].name) {
                const win = Math.floor(bet * 1.5)
                user.balance += win
                res.innerHTML = `<span class="text-yellow-400">–ù–ï–ü–õ–û–•–û! +${win} ‚ÇΩ</span>`
            } else {
                res.innerHTML = `<span class="text-red-400">–ü–£–°–¢–û...</span>`
            }
            updateBalance()
            saveUser()
        }

        function tryOpenEpstein() {
            if (user.level < 5) { alert("–ù—É–∂–µ–Ω 5 —É—Ä–æ–≤–µ–Ω—å!"); return }
            openEpsteinModal()
        }
        function openEpsteinModal() {
            document.getElementById("epstein-modal").classList.remove("hidden")
            resetEpsteinGame()
        }
        function closeEpsteinModal() { document.getElementById("epstein-modal").classList.add("hidden") }

        function setEpsteinBet(amount) {
            epsteinBet = amount
            if (user.level >= 15) document.getElementById("custom-bet-input-epstein").value = ""
        }

        function resetEpsteinGame() {
            epsteinGameActive = false
            epsteinWinnings = 0
            document.getElementById("start-epstein-btn").disabled = false
            document.getElementById("epstein-winnings").classList.add("hidden")
            document.getElementById("cashout-btn").classList.add("hidden")
            document.getElementById("epstein-grid").innerHTML = ""
        }

        function startEpsteinGame() {
            const realBet = getBetAmount("custom-bet-input-epstein", epsteinBet)
            if (user.balance < realBet) { alert("–ú–∞–ª–æ –¥–µ–Ω–µ–≥!"); return }
            
            user.balance -= realBet
            addXp(realBet)
            updateBalance()
            
            epsteinGameActive = true
            epsteinWinnings = 0
            
            document.getElementById("start-epstein-btn").disabled = true
            document.getElementById("epstein-winnings").classList.remove("hidden")
            document.getElementById("cashout-btn").classList.remove("hidden")
            document.getElementById("current-winnings").textContent = "0"
            
            const grid = document.getElementById("epstein-grid")
            grid.innerHTML = ""
            
            let types = Array(11).fill("safe").concat(Array(5).fill("bomb")).sort(() => Math.random()-0.5)
            
            for (let i=0; i<16; i++) {
                const cell = document.createElement("div")
                cell.className = "aspect-square bg-zinc-800 border-4 border-zinc-700 rounded-2xl flex items-center justify-center text-4xl cursor-pointer hover:border-pink-400 transition"
                cell.dataset.type = types[i]
                cell.innerHTML = `<span>?</span>`
                cell.onclick = () => revealCell(cell)
                grid.appendChild(cell)
            }
        }

        function revealCell(cell) {
            if (!epsteinGameActive || cell.dataset.revealed) return
            cell.dataset.revealed = "true"
            
            if (cell.dataset.type === "bomb") {
                cell.innerHTML = `<span class="text-4xl explosion">üí•</span>`
                cell.classList.add("bg-red-900", "border-red-500")
                epsteinGameActive = false
                setTimeout(() => { alert("–≠–ø—à—Ç–µ–π–Ω —Ç–µ–±—è –ø–æ–π–º–∞–ª!"); closeEpsteinModal(); }, 500)
            } else {
                const prize = Math.floor(Math.random() * 8000) + 5000
                epsteinWinnings += prize
                const fruits = ["üçâ", "üçé", "üçû"]
                cell.innerHTML = `<div class="text-center"><div class="text-3xl">${fruits[Math.floor(Math.random()*3)]}</div><div class="text-[10px] text-emerald-400">+${prize}</div></div>`
                cell.classList.add("bg-emerald-900", "border-emerald-400")
                document.getElementById("current-winnings").textContent = epsteinWinnings.toLocaleString()
            }
        }

        function cashOutEpstein() {
            if (epsteinWinnings > 0) {
                user.balance += epsteinWinnings
                updateBalance()
                saveUser()
                alert(`–í—ã–≤–µ–ª: ${epsteinWinnings} ‚ÇΩ`)
            }
            closeEpsteinModal()
        }

        function tryOpenBeast() {
            if (user.level < 10) { alert("–ù—É–∂–µ–Ω 10 —É—Ä–æ–≤–µ–Ω—å!"); return }
            openBeastModal()
        }
        function openBeastModal() {
            document.getElementById("beast-modal").classList.remove("hidden")
            drawRocket(0, 200)
        }
        function closeBeastModal() {
            if (beastInterval) clearInterval(beastInterval)
            document.getElementById("beast-modal").classList.add("hidden")
        }

        function setBeastBet(amount) {
            beastBet = amount
            document.getElementById("beast-current-bet").textContent = amount
            if (user.level >= 15) document.getElementById("custom-bet-input-beast").value = ""
        }

        function actionBeast() {
            const btn = document.getElementById("beast-action-btn")
            const realBet = getBetAmount("custom-bet-input-beast", beastBet)

            if (!beastGameActive) {
                if (user.balance < realBet) { alert("–ú–∞–ª–æ –¥–µ–Ω–µ–≥!"); return }
                user.balance -= realBet
                addXp(realBet)
                updateBalance()
                
                beastGameActive = true
                beastMultiplier = 1.00
                document.getElementById("beast-crashed-text").classList.add("hidden")
                btn.textContent = "–ó–ê–ë–†–ê–¢–¨"
                btn.classList.replace("bg-blue-600", "bg-emerald-500")
                btn.classList.replace("hover:bg-blue-500", "hover:bg-emerald-400")
                
                beastCrashPoint = (Math.random() * 0.99 + 0.01); 
                if (Math.random() < 0.1) beastCrashPoint = 1.1; 
                else beastCrashPoint = 1 / (1 - Math.random()) * 0.95;
                if (beastCrashPoint < 1.01) beastCrashPoint = 1.00;
                
                startBeastLoop(realBet)
            } else {
                const win = Math.floor(realBet * beastMultiplier)
                user.balance += win
                updateBalance()
                saveUser()
                resetBeastUI(false)
                alert(`–í—ã–≤–µ–ª ${win} ‚ÇΩ (x${beastMultiplier.toFixed(2)})`)
            }
        }

        function startBeastLoop(bet) {
            const canvas = document.getElementById("rocket-canvas")
            const ctx = canvas.getContext("2d")
            canvas.width = canvas.offsetWidth
            canvas.height = canvas.offsetHeight
            
            let time = 0
            
            beastInterval = setInterval(() => {
                time += 0.05
                beastMultiplier += 0.01 + (beastMultiplier * 0.008)
                
                document.getElementById("beast-multiplier").textContent = beastMultiplier.toFixed(2) + "x"
                document.getElementById("beast-action-btn").textContent = `–ó–ê–ë–†–ê–¢–¨ ${(bet * beastMultiplier).toFixed(0)} ‚ÇΩ`

                if (beastMultiplier >= beastCrashPoint) {
                    crashBeast()
                    return
                }

                ctx.clearRect(0, 0, canvas.width, canvas.height)
                ctx.beginPath()
                ctx.moveTo(0, canvas.height)
                
                const x = (time * 15) % canvas.width
                const y = canvas.height - (Math.pow(time, 1.8) * 2) 
                
                if (y < 20) { 
                    time = 0; 
                    ctx.clearRect(0,0,canvas.width,canvas.height);
                }

                ctx.quadraticCurveTo(x/2, canvas.height, x, y)
                ctx.strokeStyle = "#3b82f6"
                ctx.lineWidth = 4
                ctx.stroke()
                
                ctx.drawImage(beastRocketImg, x - 20, y - 20, 40, 40)
            }, 50)
        }

        function crashBeast() {
            clearInterval(beastInterval)
            document.getElementById("beast-crashed-text").classList.remove("hidden")
            resetBeastUI(true)
        }

        function resetBeastUI(crashed) {
            beastGameActive = false
            const btn = document.getElementById("beast-action-btn")
            btn.textContent = "–°–¢–ê–†–¢"
            btn.classList.replace("bg-emerald-500", "bg-blue-600")
            btn.classList.replace("hover:bg-emerald-400", "hover:bg-blue-500")
            if (crashed) document.getElementById("beast-multiplier").textContent = "CRASH"
        }

        function drawRocket(x, y) {}

        function showProfile() {
            const newName = prompt("–ù–æ–≤—ã–π –Ω–∏–∫:", user.username)
            if (newName && newName.trim()) {
                user.username = newName.trim().toUpperCase()
                document.getElementById("username-display").textContent = user.username
                saveUser()
            }
        }
        function showAgreement() { document.getElementById("agreement-modal").classList.remove("hidden") }
        function closeAgreement() { document.getElementById("agreement-modal").classList.add("hidden") }

        window.onload = function() {
            loadUser()
            if (!localStorage.getItem("meowflopr_user_v2")) document.getElementById("login-modal").classList.remove("hidden")
            showSection("home")
        }
    </script>
</body>
</html>
