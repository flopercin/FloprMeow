<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MeowFlopr Casino</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        body {
            font-family: 'Press Start 2P', system-ui;
        }
        
        .neon-text {
            text-shadow: 0 0 10px #ff00ff,
                        0 0 20px #ff00ff,
                        0 0 40px #00ffff;
        }
        
        .slot-reel {
            transition: all 0.1s linear;
        }
        
        .explosion {
            animation: explode 0.6s forwards;
        }
        
        @keyframes explode {
            0% { transform: scale(0.5); opacity: 1; }
            50% { transform: scale(1.8); }
            100% { transform: scale(2.5); opacity: 0; }
        }
        
        .card-hover {
            transition: all 0.3s;
        }
        .card-hover:hover {
            transform: scale(1.02);
            box-shadow: 0 0 30px #ff00ff;
        }
        
        .reel {
            height: 180px;
            overflow: hidden;
            border: 4px solid #ffd700;
            background: #111;
        }

        .rocket-container {
            position: relative;
            height: 300px;
            border-left: 2px solid #555;
            border-bottom: 2px solid #555;
            overflow: hidden;
        }

        .rocket {
            position: absolute;
            bottom: 10px;
            left: 10px;
            width: 60px;
            transition: bottom 0.1s linear, left 0.1s linear;
        }

        .locked-overlay {
            background: rgba(0,0,0,0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: absolute;
            inset: 0;
            z-index: 20;
        }
    </style>
</head>
<body class="bg-zinc-950 text-white overflow-x-hidden">
    <header class="bg-black border-b-4 border-pink-500 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4 flex flex-col sm:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-full overflow-hidden border-2 border-pink-500">
                    <img src="main.jpg" class="w-full h-full object-cover">
                </div>
                <div>
                    <h1 class="text-2xl sm:text-3xl font-bold neon-text tracking-widest">MEOWFLOPR</h1>
                    <p class="text-pink-400 text-[10px] -mt-1">CASINO</p>
                </div>
            </div>
            
            <div class="flex flex-wrap items-center justify-center gap-4 sm:gap-8">
                <nav class="flex gap-4 sm:gap-8 text-[10px] sm:text-sm">
                    <a onclick="showSection('home')" class="cursor-pointer hover:text-pink-400 transition">–ì–õ–ê–í–ù–ê–Ø</a>
                    <a onclick="showSection('games')" class="cursor-pointer hover:text-pink-400 transition">–ò–ì–†–´</a>
                    <a onclick="showSection('leaderboard')" class="cursor-pointer hover:text-pink-400 transition">–¢–û–ü</a>
                </nav>
                
                <div class="flex items-center gap-3">
                    <div class="bg-zinc-900 px-4 py-2 rounded-full border border-purple-500 flex flex-col items-end">
                        <div class="text-[10px] text-purple-400">LVL <span id="level-display">1</span></div>
                        <div class="w-20 h-1 bg-zinc-700 rounded-full mt-1">
                            <div id="xp-bar" class="h-full bg-purple-500 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>

                    <div id="balance-display" class="bg-zinc-900 px-4 py-2 rounded-full border-2 border-emerald-400 flex items-center gap-2 font-bold text-sm">
                        <span class="text-emerald-400">‚ÇΩ</span>
                        <span id="balance">100000</span>
                    </div>
                    
                    <div onclick="showProfile()" class="flex items-center gap-2 cursor-pointer">
                        <div id="username-display" class="text-pink-400 text-sm hidden sm:block">–ò–ì–†–û–ö</div>
                        <div class="w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center text-sm">üêæ</div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section id="home" class="relative min-h-screen flex items-center justify-center bg-[radial-gradient(at_center,#4c1d95_0%,#000_70%)] py-20">
        <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1518684079-3c830dcef090')] opacity-10 bg-cover"></div>
        <div class="text-center z-10 px-6">
            <h2 class="text-4xl sm:text-7xl font-bold neon-text mb-4">–î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨ –í</h2>
            <h1 class="text-5xl sm:text-8xl font-black tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400">MEOWFLOPR</h1>
            <p class="text-lg sm:text-2xl mt-6 text-pink-300">–ì–¥–µ –∫–∞–∂–¥—ã–π —Å–ø–∏–Ω ‚Äî —ç—Ç–æ —Ä–∏—Å–∫</p>
            
            <div class="mt-12 flex justify-center gap-6">
                <button onclick="showGames()" 
                        class="bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 px-10 py-4 sm:px-16 sm:py-6 text-xl sm:text-2xl font-bold rounded-xl border-4 border-white transition">
                    –ò–ì–†–ê–¢–¨ –°–ï–ô–ß–ê–°
                </button>
            </div>
            
            <div class="mt-16 text-[10px] text-zinc-500 flex justify-center gap-8">
                <div>18+</div>
                <div>–í—Å—ë –≤ —à—É—Ç–∫—É</div>
                <div>–ù–µ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫</div>
            </div>
        </div>
    </section>

    <section id="leaderboard" class="max-w-4xl mx-auto px-6 py-16 hidden">
        <h2 class="text-3xl sm:text-5xl font-bold text-center mb-12 neon-text">–¢–û–ü –ë–û–ì–ê–ß–ï–ô</h2>
        <div class="bg-zinc-900 border-4 border-yellow-500 rounded-3xl p-8">
            <div class="flex justify-between border-b-2 border-zinc-700 pb-4 mb-4 text-zinc-400 text-xs sm:text-sm">
                <span>–ò–ì–†–û–ö</span>
                <span>–ë–ê–õ–ê–ù–°</span>
            </div>
            <ul class="space-y-4">
                <li class="flex justify-between items-center text-yellow-400 font-bold text-sm sm:text-xl">
                    <div class="flex items-center gap-3">
                        <span class="text-2xl">ü•á</span>
                        <span>MeowFlopr</span>
                    </div>
                    <span>1 488 000 000 ‚ÇΩ</span>
                </li>
                <li class="flex justify-between items-center text-zinc-300 text-sm sm:text-lg">
                    <div class="flex items-center gap-3">
                        <span class="text-xl">ü•à</span>
                        <span>Durov_Ton</span>
                    </div>
                    <span>500 000 000 ‚ÇΩ</span>
                </li>
                <li class="flex justify-between items-center text-zinc-300 text-sm sm:text-lg">
                    <div class="flex items-center gap-3">
                        <span class="text-xl">ü•â</span>
                        <span>Mellstroy_Fan</span>
                    </div>
                    <span>123 000 000 ‚ÇΩ</span>
                </li>
            </ul>
        </div>
    </section>

    <section id="games" class="max-w-7xl mx-auto px-6 py-16 hidden">
        <h2 class="text-3xl sm:text-5xl font-bold text-center mb-12 neon-text">–ò–ì–†–´</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div onclick="openSlotsModal()" 
                 class="card-hover bg-zinc-900 rounded-3xl overflow-hidden border-4 border-yellow-400 cursor-pointer relative">
                <img src="https://cdn.nur.kz/images/1200x675/36135d7df8b99f1afe63116c264a570c.jpeg?version=1" 
                     class="w-full h-60 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-bold mb-2">–°–õ–û–¢–´ –ú–ï–õ–°–¢–†–û–Ø</h3>
                    <p class="text-zinc-400 text-xs mb-4">–°–ª–æ–∂–Ω–æ, –Ω–æ –º–æ–∂–Ω–æ</p>
                    <div class="text-yellow-400 text-xs">LVL 1+</div>
                </div>
            </div>
            
            <div id="game-epstein-card" onclick="openEpsteinModal()" 
                 class="card-hover bg-zinc-900 rounded-3xl overflow-hidden border-4 border-red-500 cursor-pointer relative group">
                <img src="https://nypost.com/wp-content/uploads/sites/2/2019/08/jeffrey-epstein-2-3.jpg?quality=75&strip=all" 
                     class="w-full h-60 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-bold mb-2 text-red-400">–≠–ü–®–¢–ï–ô–ù</h3>
                    <p class="text-zinc-400 text-xs mb-4">–†–∏—Å–∫ –∏ –±–æ–ª—å—à–∏–µ –¥–µ–Ω—å–≥–∏</p>
                    <div class="text-red-400 text-xs">LVL 5+</div>
                </div>
                <div id="lock-epstein" class="locked-overlay hidden">
                    <div class="text-4xl mb-2">üîí</div>
                    <div class="text-red-500 font-bold">–ù–£–ñ–ï–ù 5 –£–†–û–í–ï–ù–¨</div>
                </div>
            </div>

            <div id="game-beast-card" onclick="openBeastModal()" 
                 class="card-hover bg-zinc-900 rounded-3xl overflow-hidden border-4 border-blue-500 cursor-pointer relative group">
                <img src="mrbeast.jpg" class="w-full h-60 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-bold mb-2 text-blue-400">MR.BEAST CRASH</h3>
                    <p class="text-zinc-400 text-xs mb-4">–£—Å–ø–µ–π –∑–∞–±—Ä–∞—Ç—å –¥–æ –≤–∑—Ä—ã–≤–∞</p>
                    <div class="text-blue-400 text-xs">LVL 10+</div>
                </div>
                <div id="lock-beast" class="locked-overlay hidden">
                    <div class="text-4xl mb-2">üîí</div>
                    <div class="text-blue-500 font-bold">–ù–£–ñ–ï–ù 10 –£–†–û–í–ï–ù–¨</div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-black py-12 border-t-4 border-pink-500 mt-auto">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <div class="flex justify-center gap-8 text-2xl mb-6">
                <a href="https://t.me/MeowFlopr" target="_blank" class="hover:text-pink-400">t.me/MeowFlopr</a>
            </div>
            <p class="text-zinc-500 text-xs">–°–∞–π—Ç —Å–æ–∑–¥–∞–Ω –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ —à—É—Ç–∫—É.<br>¬© 2026 MeowFlopr.</p>
        </div>
    </footer>

    <div id="login-modal" class="fixed inset-0 bg-black/80 flex items-center justify-center hidden z-[100]">
        <div class="bg-zinc-900 border-4 border-pink-500 rounded-3xl p-10 max-w-md w-full mx-4">
            <h2 class="text-2xl sm:text-4xl text-center mb-8">–ö–¢–û –¢–´, –í–û–ò–ù?</h2>
            <input id="username-input" type="text" placeholder="–ù–ò–ö–ù–ï–ô–ú" 
                   class="w-full bg-black border-2 border-pink-400 px-6 py-4 text-lg focus:outline-none focus:border-pink-500 rounded-2xl mb-6">
            <button onclick="login()" class="w-full bg-gradient-to-r from-pink-500 to-purple-600 py-4 text-xl font-bold rounded-2xl">–í–û–ô–¢–ò</button>
        </div>
    </div>

    <div id="slots-modal" class="fixed inset-0 bg-black/90 flex items-center justify-center hidden z-[100] overflow-y-auto">
        <div class="bg-zinc-950 border-8 border-yellow-400 rounded-3xl p-4 sm:p-8 max-w-4xl w-full m-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl sm:text-4xl">–°–õ–û–¢–´</h2>
                <button onclick="closeSlotsModal()" class="text-4xl hover:text-pink-400">‚úï</button>
            </div>
            
            <div class="flex justify-center gap-2 sm:gap-4 mb-8">
                <div id="reel1" class="reel w-24 sm:w-40 flex items-center justify-center"></div>
                <div id="reel2" class="reel w-24 sm:w-40 flex items-center justify-center"></div>
                <div id="reel3" class="reel w-24 sm:w-40 flex items-center justify-center"></div>
            </div>
            
            <div class="mb-4">
                <div class="text-center mb-2 text-xs text-zinc-400">–ö–ê–°–¢–û–ú–ù–ê–Ø –°–¢–ê–í–ö–ê (LVL 15+)</div>
                <input type="number" id="custom-bet-slots" onchange="setCustomBet('slots', this.value)" 
                       class="w-full bg-zinc-900 border border-zinc-700 p-3 rounded-xl text-center mb-4 disabled:opacity-30 disabled:cursor-not-allowed" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
                
                <div class="flex justify-center flex-wrap gap-2 sm:gap-4">
                    <button onclick="setBet(100)" class="px-4 py-2 bg-zinc-800 rounded-xl">100</button>
                    <button onclick="setBet(500)" class="px-4 py-2 bg-zinc-800 rounded-xl">500</button>
                    <button onclick="setBet(1000)" class="px-4 py-2 bg-zinc-800 rounded-xl">1k</button>
                </div>
            </div>
            
            <div class="text-center">
                <div class="text-xl mb-2">–°–¢–ê–í–ö–ê: <span id="current-bet" class="text-yellow-400">1000</span> ‚ÇΩ</div>
                <button onclick="spin()" id="spin-button" class="w-full bg-gradient-to-r from-yellow-400 to-amber-500 text-black text-2xl font-bold py-6 rounded-3xl hover:brightness-110">–ö–†–£–¢–ò–¢–¨</button>
            </div>
            <div id="slots-result" class="text-center text-xl mt-6 h-8 font-bold"></div>
        </div>
    </div>

    <div id="epstein-modal" class="fixed inset-0 bg-black/90 flex items-center justify-center hidden z-[100] overflow-y-auto">
        <div class="bg-zinc-950 border-8 border-red-600 rounded-3xl p-4 sm:p-8 max-w-5xl w-full m-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl sm:text-4xl text-red-400">–≠–ü–®–¢–ï–ô–ù</h2>
                <button onclick="closeEpsteinModal()" class="text-4xl hover:text-red-400">‚úï</button>
            </div>
            
            <div class="flex flex-col md:flex-row gap-8">
                <div class="w-full md:w-1/3">
                    <input type="number" id="custom-bet-epstein" onchange="setCustomBet('epstein', this.value)" 
                           class="w-full bg-zinc-900 border border-red-900 p-3 rounded-xl text-center mb-4 disabled:opacity-30" placeholder="–ö–∞—Å—Ç–æ–º–Ω–∞—è (LVL 15+)">
                    
                    <div class="grid grid-cols-2 gap-2 mb-6">
                        <button onclick="setEpsteinBet(1000)" class="py-3 bg-zinc-800 rounded-xl">1k</button>
                        <button onclick="setEpsteinBet(5000)" class="py-3 bg-zinc-800 rounded-xl">5k</button>
                        <button onclick="setEpsteinBet(10000)" class="py-3 bg-zinc-800 rounded-xl">10k</button>
                        <button onclick="setEpsteinBet(50000)" class="py-3 bg-zinc-800 rounded-xl">50k</button>
                    </div>
                    
                    <div class="text-center mb-4">–°–¢–ê–í–ö–ê: <span id="epstein-current-bet-display" class="text-red-400">0</span></div>

                    <button onclick="startEpsteinGame()" id="start-epstein-btn" class="w-full bg-red-600 py-4 text-xl font-bold rounded-2xl mb-4">–ù–ê–ß–ê–¢–¨</button>
                    
                    <div id="epstein-winnings" class="text-center text-xl font-bold text-emerald-400 hidden mb-2">
                        +<span id="current-winnings">0</span> ‚ÇΩ
                    </div>
                    <button onclick="cashOutEpstein()" id="cashout-btn" class="w-full bg-emerald-500 text-black py-4 text-xl font-bold rounded-2xl hidden">–ó–ê–ë–†–ê–¢–¨</button>
                </div>
                
                <div class="w-full md:w-2/3">
                    <div id="epstein-grid" class="grid grid-cols-4 gap-2 sm:gap-3"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="beast-modal" class="fixed inset-0 bg-black/90 flex items-center justify-center hidden z-[100] overflow-y-auto">
        <div class="bg-zinc-950 border-8 border-blue-500 rounded-3xl p-4 sm:p-8 max-w-2xl w-full m-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl sm:text-3xl text-blue-400">MR.BEAST CRASH</h2>
                <button onclick="closeBeastModal()" class="text-4xl hover:text-blue-400">‚úï</button>
            </div>

            <div class="rocket-container bg-zinc-900 rounded-xl mb-6 flex items-center justify-center relative">
                <div class="absolute inset-0 bg-[url('https://cdn.dribbble.com/users/1612143/screenshots/11550269/media/c8e545465691c7827e8a9391e605d39d.jpg?compress=1&resize=400x300')] opacity-20 bg-cover"></div>
                <div id="beast-multiplier" class="text-6xl font-black z-10 text-white drop-shadow-lg">1.00x</div>
                <img id="rocket-img" src="raketmrbeast.jpg" class="rocket hidden rounded-full border-2 border-white">
                <div id="crash-msg" class="absolute inset-0 flex items-center justify-center bg-red-900/80 z-20 hidden text-4xl font-bold text-red-200">CRASHED!</div>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="text-xs text-zinc-500">–°–¢–ê–í–ö–ê</label>
                    <input type="number" id="beast-bet-input" value="1000" class="w-full bg-zinc-800 p-3 rounded-lg text-white font-bold mb-2">
                    <div class="flex gap-2">
                        <button onclick="setBeastBet(1000)" class="bg-zinc-700 px-2 py-1 rounded text-xs">1k</button>
                        <button onclick="setBeastBet(10000)" class="bg-zinc-700 px-2 py-1 rounded text-xs">10k</button>
                        <input id="custom-bet-beast" onchange="setBeastBet(this.value)" class="bg-zinc-700 px-2 py-1 rounded text-xs w-16 text-center disabled:opacity-30" placeholder="Custom" disabled>
                    </div>
                </div>
                <div class="flex items-end">
                    <button id="beast-action-btn" onclick="startBeastGame()" class="w-full bg-blue-600 hover:bg-blue-500 py-4 text-xl font-bold rounded-xl transition">
                        –°–¢–ê–†–¢
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let user = {
            username: "–ò–ì–†–û–ö",
            balance: 100000,
            level: 1,
            xp: 0
        }

        let currentBet = 1000
        let epsteinBet = 0
        let beastBet = 1000
        let epsteinWinnings = 0
        let gameActive = false
        let beastInterval = null
        let beastMultiplier = 1.00

        const symbols = [
            { name: "banana", url: "https://avatars.mds.yandex.net/get-mpic/5234083/img_id3506543352633991634.png/orig" },
            { name: "plum", url: "https://main-cdn.sbermegamarket.ru/big1/hlr-system/-90/257/429/371/118/48/100032397594b0.jpg" },
            { name: "grape", url: "https://avatars.mds.yandex.net/get-mpic/5145248/img_id4537599123360367823.png/orig" },
            { name: "lemon", url: "https://img.freepik.com/premium-vector/lemon-pixel-art-vector-illustration-isolated-white-background_110464-475.jpg" },
            { name: "cherry", url: "https://st4.depositphotos.com/18659228/22212/v/450/depositphotos_222120038-stock-illustration-pixel-art-cherry-icon-vector.jpg" }
        ]

        function loadUser() {
            const saved = localStorage.getItem("meowflopr_user_v2")
            if (saved) {
                user = JSON.parse(saved)
                if (!user.level) user.level = 1
                if (!user.xp) user.xp = 0
            }
            updateUI()
            checkLocks()
        }

        function saveUser() {
            localStorage.setItem("meowflopr_user_v2", JSON.stringify(user))
        }

        function updateUI() {
            document.getElementById("balance").textContent = user.balance.toLocaleString("ru-RU")
            document.getElementById("username-display").textContent = user.username
            document.getElementById("level-display").textContent = user.level
            
            const xpForNext = user.level * 2000
            const progress = (user.xp / xpForNext) * 100
            document.getElementById("xp-bar").style.width = `${Math.min(progress, 100)}%`
        }

        function addXP(amount) {
            user.xp += amount
            const needed = user.level * 2000
            if (user.xp >= needed) {
                user.level++
                user.xp -= needed
                alert(`–£–†–û–í–ï–ù–¨ –ü–û–í–´–®–ï–ù! –¢–ï–ü–ï–†–¨ –¢–í–û–ô –£–†–û–í–ï–ù–¨: ${user.level}`)
                checkLocks()
            }
            saveUser()
            updateUI()
        }

        function checkLocks() {
            const epsteinCard = document.getElementById("game-epstein-card")
            const beastCard = document.getElementById("game-beast-card")
            const epsteinLock = document.getElementById("lock-epstein")
            const beastLock = document.getElementById("lock-beast")

            if (user.level < 5) {
                epsteinLock.classList.remove("hidden")
                epsteinCard.onclick = null
            } else {
                epsteinLock.classList.add("hidden")
                epsteinCard.onclick = openEpsteinModal
            }

            if (user.level < 10) {
                beastLock.classList.remove("hidden")
                beastCard.onclick = null
            } else {
                beastLock.classList.add("hidden")
                beastCard.onclick = openBeastModal
            }

            const customInputs = document.querySelectorAll('input[id^="custom-bet"]')
            customInputs.forEach(input => {
                if (user.level >= 15) {
                    input.disabled = false
                    input.placeholder = "–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É"
                } else {
                    input.disabled = true
                    input.placeholder = "–ù–£–ñ–ï–ù LVL 15"
                }
            })
        }

        function setCustomBet(game, value) {
            const val = parseInt(value)
            if (isNaN(val) || val < 100) return
            
            if (game === 'slots') setBet(val)
            if (game === 'epstein') setEpsteinBet(val)
            if (game === 'beast') setBeastBet(val)
        }

        function login() {
            const input = document.getElementById("username-input").value.trim()
            if (input) user.username = input.toUpperCase()
            saveUser()
            updateUI()
            document.getElementById("login-modal").classList.add("hidden")
        }

        function showSection(section) {
            document.getElementById("home").classList.add("hidden")
            document.getElementById("games").classList.add("hidden")
            document.getElementById("leaderboard").classList.add("hidden")
            document.getElementById(section).classList.remove("hidden")
        }
        function showGames() { showSection("games") }
        function showProfile() {
            const newName = prompt("–ù–æ–≤—ã–π –Ω–∏–∫–Ω–µ–π–º:", user.username)
            if (newName) {
                user.username = newName.trim().toUpperCase()
                saveUser()
                updateUI()
            }
        }

        // SLOTS
        function openSlotsModal() {
            document.getElementById("slots-modal").classList.remove("hidden")
            resetReels()
        }
        function closeSlotsModal() { document.getElementById("slots-modal").classList.add("hidden") }
        
        function resetReels() {
            [1,2,3].forEach(i => {
                document.getElementById(`reel${i}`).innerHTML = `<img src="${symbols[0].url}" class="w-full h-full object-contain">`
            })
        }
        function setBet(amount) {
            currentBet = amount
            document.getElementById("current-bet").textContent = amount
        }
        function spin() {
            if (user.balance < currentBet) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!")
            
            user.balance -= currentBet
            addXP(Math.floor(currentBet / 100))
            updateUI()
            
            const btn = document.getElementById("spin-button")
            btn.disabled = true
            document.getElementById("slots-result").innerHTML = ""
            
            const finalSymbols = []
            
            [1,2,3].forEach((reelNum, index) => {
                const reelEl = document.getElementById(`reel${reelNum}`)
                let spins = 0
                const interval = setInterval(() => {
                    const rand = symbols[Math.floor(Math.random() * symbols.length)]
                    reelEl.innerHTML = `<img src="${rand.url}" class="w-full h-full object-contain">`
                    spins++
                    if (spins > 10 + index * 5) {
                        clearInterval(interval)
                        
                        const chance = Math.random()
                        let finalIndex = Math.floor(Math.random() * symbols.length)
                        if (chance > 0.8) finalIndex = Math.floor(Math.random() * 3) 
                        
                        const final = symbols[finalIndex]
                        reelEl.innerHTML = `<img src="${final.url}" class="w-full h-full object-contain">`
                        finalSymbols.push(final)
                        
                        if (finalSymbols.length === 3) {
                            checkSlotsWin(finalSymbols)
                            btn.disabled = false
                        }
                    }
                }, 80)
            })
        }
        function checkSlotsWin(res) {
            const div = document.getElementById("slots-result")
            if (res[0].name === res[1].name && res[1].name === res[2].name) {
                const win = currentBet * 15 
                user.balance += win
                div.innerHTML = `<span class="text-emerald-400">–î–ñ–ï–ö–ü–û–¢! +${win}</span>`
                addXP(500)
            } else if (res[0].name === res[1].name || res[1].name === res[2].name || res[0].name === res[2].name) {
                const win = currentBet * 2
                user.balance += win
                div.innerHTML = `<span class="text-emerald-400">–ü–ê–†–ê! +${win}</span>`
            } else {
                div.innerHTML = `<span class="text-red-500">–ü–£–°–¢–û</span>`
            }
            saveUser()
            updateUI()
        }

        // EPSTEIN
        function openEpsteinModal() {
            document.getElementById("epstein-modal").classList.remove("hidden")
            document.getElementById("epstein-winnings").classList.add("hidden")
            document.getElementById("cashout-btn").classList.add("hidden")
            gameActive = false
            document.getElementById("epstein-grid").innerHTML = ""
            document.getElementById("start-epstein-btn").disabled = false
        }
        function closeEpsteinModal() { document.getElementById("epstein-modal").classList.add("hidden") }
        function setEpsteinBet(amount) {
            epsteinBet = amount
            document.getElementById("epstein-current-bet-display").textContent = amount
        }
        function startEpsteinGame() {
            if (user.balance < epsteinBet || epsteinBet <= 0) return alert("–ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç–∞–≤–∫–∞!")
            user.balance -= epsteinBet
            addXP(Math.floor(epsteinBet / 100))
            updateUI()
            
            gameActive = true
            epsteinWinnings = 0
            
            document.getElementById("start-epstein-btn").disabled = true
            document.getElementById("epstein-winnings").classList.remove("hidden")
            document.getElementById("cashout-btn").classList.remove("hidden")
            document.getElementById("current-winnings").textContent = "0"
            
            const grid = document.getElementById("epstein-grid")
            grid.innerHTML = ""
            let types = Array(12).fill("safe").concat(Array(4).fill("bomb")).sort(() => Math.random() - 0.5)
            
            types.forEach(type => {
                const cell = document.createElement("div")
                cell.className = "aspect-square bg-zinc-800 border-2 border-zinc-700 rounded-xl flex items-center justify-center text-2xl cursor-pointer hover:border-red-400 transition"
                cell.onclick = () => {
                    if (!gameActive || cell.classList.contains("revealed")) return
                    cell.classList.add("revealed")
                    
                    if (type === "bomb") {
                        cell.innerHTML = "üí•"
                        cell.classList.add("bg-red-900")
                        gameActive = false
                        setTimeout(() => { alert("–í–ó–†–´–í!"); closeEpsteinModal(); }, 500)
                    } else {
                        const prize = Math.floor(epsteinBet * 0.4) + Math.floor(Math.random() * 1000)
                        epsteinWinnings += prize
                        cell.innerHTML = `<div><div class="text-xl">üí∞</div><div class="text-[10px]">+${prize}</div></div>`
                        cell.classList.add("bg-emerald-900")
                        document.getElementById("current-winnings").textContent = epsteinWinnings
                    }
                }
                grid.appendChild(cell)
            })
        }
        function cashOutEpstein() {
            if (epsteinWinnings > 0) {
                user.balance += epsteinWinnings
                addXP(100)
                saveUser()
                updateUI()
                alert(`–ó–∞–±—Ä–∞–ª: ${epsteinWinnings} ‚ÇΩ`)
            }
            closeEpsteinModal()
        }

        // BEAST CRASH
        function openBeastModal() { document.getElementById("beast-modal").classList.remove("hidden") }
        function closeBeastModal() { 
            document.getElementById("beast-modal").classList.add("hidden")
            if(beastInterval) clearInterval(beastInterval)
        }
        function setBeastBet(val) {
            beastBet = parseInt(val)
            document.getElementById("beast-bet-input").value = beastBet
        }
        function startBeastGame() {
            if (beastInterval) return 
            if (user.balance < beastBet) return alert("–ù–µ—Ç –¥–µ–Ω–µ–≥!")
            
            user.balance -= beastBet
            addXP(Math.floor(beastBet / 100))
            updateUI()
            
            const btn = document.getElementById("beast-action-btn")
            const rocket = document.getElementById("rocket-img")
            const display = document.getElementById("beast-multiplier")
            const crashMsg = document.getElementById("crash-msg")
            
            crashMsg.classList.add("hidden")
            rocket.classList.remove("hidden")
            rocket.style.bottom = "10px"
            rocket.style.left = "10px"
            
            btn.textContent = "–ó–ê–ë–†–ê–¢–¨"
            btn.classList.remove("bg-blue-600")
            btn.classList.add("bg-emerald-500")
            btn.onclick = cashOutBeast
            
            beastMultiplier = 1.00
            let speed = 0.01
            let time = 0
            
            const crashPoint = (1 / (1 - Math.random()) * 0.95) // Casino algo
            const actualCrash = Math.max(1.1, Math.min(crashPoint, 50.0))
            
            beastInterval = setInterval(() => {
                time += 1
                beastMultiplier += speed
                speed += 0.0005
                
                display.textContent = beastMultiplier.toFixed(2) + "x"
                
                const percent = Math.min(time / 2, 90)
                rocket.style.bottom = `${percent}%`
                rocket.style.left = `${percent}%`
                
                if (beastMultiplier >= actualCrash) {
                    crashBeast()
                }
            }, 50)
        }
        function crashBeast() {
            clearInterval(beastInterval)
            beastInterval = null
            document.getElementById("crash-msg").classList.remove("hidden")
            document.getElementById("rocket-img").classList.add("hidden")
            resetBeastBtn()
        }
        function cashOutBeast() {
            clearInterval(beastInterval)
            beastInterval = null
            const win = Math.floor(beastBet * beastMultiplier)
            user.balance += win
            addXP(200)
            alert(`–ü–û–î–ù–Ø–õ: ${win} ‚ÇΩ`)
            saveUser()
            updateUI()
            resetBeastBtn()
            document.getElementById("rocket-img").classList.add("hidden")
        }
        function resetBeastBtn() {
            const btn = document.getElementById("beast-action-btn")
            btn.textContent = "–°–¢–ê–†–¢"
            btn.classList.add("bg-blue-600")
            btn.classList.remove("bg-emerald-500")
            btn.onclick = startBeastGame
        }

        window.onload = function() {
            loadUser()
            if (!localStorage.getItem("meowflopr_user_v2")) {
                document.getElementById("login-modal").classList.remove("hidden")
            }
            showSection("home")
        }
    </script>
</body>
</html>
