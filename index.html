<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MeowFlopr Casino</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        body {
            font-family: 'Press Start 2P', system-ui;
            -webkit-tap-highlight-color: transparent;
        }
        
        .neon-text {
            text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff, 0 0 40px #00ffff;
        }

        .neon-border {
            box-shadow: 0 0 15px #ff00ff;
        }
        
        .explosion {
            animation: explode 0.6s forwards;
        }
        
        @keyframes explode {
            0% { transform: scale(0.5); opacity: 1; }
            50% { transform: scale(1.8); }
            100% { transform: scale(2.5); opacity: 0; }
        }
        
        .card-hover {
            transition: all 0.3s;
        }
        @media (min-width: 1024px) {
            .card-hover:hover {
                transform: scale(1.05) rotate(2deg);
                box-shadow: 0 0 30px #ff00ff;
            }
        }
        
        .reel {
            height: 120px;
            width: 80px;
            overflow: hidden;
            border: 4px solid #ffd700;
            background: #111;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @media (min-width: 768px) {
            .reel { height: 180px; width: 140px; }
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        #notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .toast {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #ff00ff;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-size: 10px;
            animation: slideIn 0.3s ease-out;
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.5);
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .locked {
            filter: grayscale(1) brightness(0.5);
            pointer-events: none;
            position: relative;
        }

        .lock-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            background: rgba(0,0,0,0.4);
        }
    </style>
</head>
<body class="bg-zinc-950 text-white overflow-x-hidden">
    
    <div id="notification-container"></div>

    <header class="bg-black border-b-4 border-pink-500 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-3 flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-3">
                <img src="main.jpg" alt="MeowFlopr" class="w-10 h-10 object-cover rounded-xl border-2 border-pink-500">
                <div>
                    <h1 class="text-xl md:text-2xl font-bold neon-text tracking-tighter md:tracking-widest">MEOWFLOPR</h1>
                </div>
            </div>
            
            <nav class="flex gap-4 md:gap-8 text-[10px] md:text-sm">
                <a onclick="showSection('home')" class="cursor-pointer hover:text-pink-400 transition">–ì–õ–ê–í–ù–ê–Ø</a>
                <a onclick="showSection('games')" class="cursor-pointer hover:text-pink-400 transition">–ò–ì–†–´</a>
                <a onclick="showLeaderboard()" class="cursor-pointer hover:text-pink-400 transition">–¢–û–ü</a>
                <a onclick="showBonus()" class="cursor-pointer text-yellow-400 hover:text-yellow-200 transition">–ë–û–ù–£–°</a>
            </nav>
            
            <div class="flex items-center gap-4">
                <div class="bg-zinc-900 px-4 py-2 rounded-full border-2 border-emerald-400 flex items-center gap-2 text-[10px] md:text-xs">
                    <span class="text-emerald-400">‚ÇΩ</span>
                    <span id="balance">100000</span>
                </div>
                <div onclick="showProfile()" class="flex items-center gap-2 cursor-pointer bg-zinc-900 p-1 pr-3 rounded-full border border-pink-500">
                    <div class="w-7 h-7 bg-pink-500 rounded-full flex items-center justify-center text-sm">üêæ</div>
                    <div id="user-level" class="text-[10px] text-purple-400 font-bold">Lvl 1</div>
                </div>
            </div>
        </div>
    </header>

    <section id="home" class="relative min-h-[90vh] flex items-center justify-center bg-[radial-gradient(at_center,#4c1d95_0%,#000_70%)]">
        <div class="text-center z-10 px-6">
            <h2 class="text-3xl md:text-6xl font-bold neon-text mb-4">–î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨</h2>
            <h1 class="text-4xl md:text-8xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400">MEOWFLOPR</h1>
            <p class="text-sm md:text-xl mt-6 text-pink-300">–ö–æ—Ç –≤ –º–µ—à–∫–µ... —Å –¥–µ–Ω—å–≥–∞–º–∏!</p>
            <button onclick="showSection('games')" class="mt-12 bg-gradient-to-r from-pink-500 to-purple-600 px-8 py-4 md:px-16 md:py-6 text-sm md:text-2xl font-bold rounded-xl border-4 border-white transition-transform active:scale-95">
                –ò–ì–†–ê–¢–¨
            </button>
        </div>
    </section>

    <section id="games" class="max-w-7xl mx-auto px-6 py-16 hidden">
        <h2 class="text-3xl md:text-5xl font-bold text-center mb-12 neon-text uppercase">–ò–≥—Ä–æ–≤–æ–π –∑–∞–ª</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div id="game-card-slots" onclick="openSlotsModal()" class="card-hover bg-zinc-900 rounded-3xl overflow-hidden border-4 border-yellow-400 cursor-pointer group relative">
                <img src="https://cdn.nur.kz/images/1200x675/36135d7df8b99f1afe63116c264a570c.jpeg?version=1" class="w-full h-64 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-bold mb-2">–°–õ–û–¢–´ –ú–ï–õ–°–¢–†–û–Ø</h3>
                    <button class="w-full bg-yellow-400 text-black py-3 font-bold rounded-xl">–ò–ì–†–ê–¢–¨</button>
                </div>
            </div>
            
            <div id="game-card-epstein" onclick="openEpsteinModal()" class="card-hover bg-zinc-900 rounded-3xl overflow-hidden border-4 border-red-500 cursor-pointer relative">
                <img src="https://nypost.com/wp-content/uploads/sites/2/2019/08/jeffrey-epstein-2-3.jpg?quality=75&strip=all" class="w-full h-64 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-bold text-red-400 mb-2">–û–°–¢–†–û–í –≠–ü–®–¢–ï–ô–ù–ê</h3>
                    <button class="w-full bg-red-600 py-3 font-bold rounded-xl">–†–ê–ó–ë–ò–†–ê–¢–¨–°–Ø</button>
                </div>
                <div id="lock-epstein" class="lock-overlay hidden">
                    <i class="fas fa-lock text-5xl mb-4"></i>
                    <p class="text-xs">–ù–£–ñ–ï–ù 5 LVL</p>
                </div>
            </div>
            
            <div id="game-card-crash" onclick="openMrBeastModal()" class="card-hover bg-zinc-900 rounded-3xl overflow-hidden border-4 border-cyan-400 cursor-pointer relative">
                <img src="mrbeast.jpg" class="w-full h-64 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-bold text-cyan-400 mb-2">CRASH –ë–ò–°–¢–ê</h3>
                    <button class="w-full bg-cyan-500 text-black py-3 font-bold rounded-xl">–õ–ï–¢–ï–¢–¨</button>
                </div>
                <div id="lock-crash" class="lock-overlay hidden">
                    <i class="fas fa-lock text-5xl mb-4"></i>
                    <p class="text-xs">–ù–£–ñ–ï–ù 10 LVL</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-black py-10 border-t-4 border-pink-500 text-center">
        <p class="text-[10px] text-zinc-500 px-4">–°–∞–π—Ç —Å–æ–∑–¥–∞–Ω –≤ —à—É—Ç–∫—É. –î–µ–Ω—å–≥–∏ –Ω–µ –Ω–∞—Å—Ç–æ—è—â–∏–µ.<br>¬© 2026 MeowFlopr</p>
    </footer>

    <div id="login-modal" class="fixed inset-0 bg-black/95 flex items-center justify-center hidden z-[100] p-4">
        <div class="bg-zinc-900 border-4 border-pink-500 rounded-3xl p-6 md:p-10 max-w-md w-full">
            <h2 class="text-2xl md:text-4xl text-center mb-8">–ö–¢–û –¢–´, –í–û–ò–ù?</h2>
            <input id="username-input" type="text" placeholder="–¢–í–û–ô –ù–ò–ö" class="w-full bg-black border-2 border-pink-400 px-4 py-4 text-center text-xl rounded-xl mb-6 outline-none">
            <button onclick="login()" class="w-full bg-pink-500 py-5 font-bold rounded-xl">–í–û–ô–¢–ò</button>
        </div>
    </div>

    <div id="slots-modal" class="fixed inset-0 bg-black/95 overflow-y-auto hidden z-[100]">
        <div class="min-h-screen flex flex-col items-center p-4 md:p-10">
            <div class="w-full max-w-4xl bg-zinc-900 border-4 border-yellow-400 rounded-3xl p-6 relative">
                <button onclick="closeModal('slots-modal')" class="absolute -top-4 -right-4 bg-red-600 w-10 h-10 rounded-full border-2 border-white">‚úï</button>
                <h2 class="text-xl md:text-3xl text-center mb-8">–ú–ï–õ–°–¢–†–û–ô –°–õ–û–¢–´</h2>
                
                <div class="flex justify-center gap-2 md:gap-4 mb-8">
                    <div id="reel1" class="reel"></div>
                    <div id="reel2" class="reel"></div>
                    <div id="reel3" class="reel"></div>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-4 gap-2 mb-6">
                    <button onclick="setBet(100)" class="bg-zinc-800 py-3 rounded-lg text-[10px]">100</button>
                    <button onclick="setBet(500)" class="bg-zinc-800 py-3 rounded-lg text-[10px]">500</button>
                    <button onclick="setBet(1000)" class="bg-zinc-800 py-3 rounded-lg text-[10px]">1000</button>
                    <button onclick="setBet(5000)" class="bg-zinc-800 py-3 rounded-lg text-[10px]">5000</button>
                </div>
                
                <div class="text-center">
                    <p class="mb-4 text-yellow-400">–°–¢–ê–í–ö–ê: <span id="current-bet">1000</span> ‚ÇΩ</p>
                    <button onclick="spin()" id="spin-button" class="w-full md:w-auto bg-yellow-400 text-black px-12 py-5 rounded-2xl font-bold text-2xl active:scale-90 transition">–°–ü–ò–ù!</button>
                </div>
            </div>
        </div>
    </div>

    <div id="mrbeast-modal" class="fixed inset-0 bg-black/95 overflow-y-auto hidden z-[100]">
        <div class="min-h-screen flex flex-col items-center p-4">
            <div class="w-full max-w-5xl bg-zinc-900 border-4 border-cyan-500 rounded-3xl p-4 md:p-8 relative">
                <button onclick="closeModal('mrbeast-modal')" class="absolute top-2 right-2 text-2xl text-cyan-500">‚úï</button>
                
                <div class="flex flex-col md:flex-row gap-6">
                    <div class="w-full md:w-64 order-2 md:order-1">
                        <input id="crash-bet-input" type="number" value="1000" class="w-full bg-black border border-cyan-500 p-4 rounded-xl mb-4 text-center">
                        <button id="start-crash-btn" onclick="startCrash()" class="w-full bg-cyan-500 text-black py-6 rounded-xl font-bold text-xl mb-4">–í–ó–õ–ï–¢–ê–ï–ú</button>
                        <button id="cashout-crash-btn" onclick="cashOutCrash()" class="hidden w-full bg-emerald-500 text-black py-6 rounded-xl font-bold text-xl">–ó–ê–ë–†–ê–¢–¨: <span id="live-multiplier">1.00</span>x</button>
                    </div>
                    
                    <div class="flex-1 bg-black rounded-2xl h-64 md:h-96 relative overflow-hidden order-1 md:order-2 border-2 border-zinc-800">
                        <canvas id="crash-canvas" class="w-full h-full"></canvas>
                        <div id="crash-multiplier-display" class="absolute inset-0 flex items-center justify-center text-4xl md:text-7xl font-bold text-cyan-400">1.00x</div>
                        <img id="rocket-icon" src="raketmrbeast.jpg" class="absolute w-12 h-12 md:w-20 md:h-20 transition-all duration-100" style="bottom: 10px; left: 10px;">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="epstein-modal" class="fixed inset-0 bg-black/95 overflow-y-auto hidden z-[100]">
        <div class="min-h-screen flex flex-col items-center p-4">
            <div class="w-full max-w-4xl bg-zinc-950 border-4 border-red-600 rounded-3xl p-4 md:p-8 relative">
                <button onclick="closeModal('epstein-modal')" class="absolute top-2 right-2 text-red-500">‚úï</button>
                <div class="text-center mb-6">
                    <h2 class="text-xl md:text-3xl text-red-500 mb-2">–û–°–¢–†–û–í –≠–ü–®–¢–ï–ô–ù–ê</h2>
                    <p id="epstein-status" class="text-xs text-zinc-400">–ù–∞–π–¥–∏ —Ñ—Ä—É–∫—Ç—ã, –Ω–µ –ø–æ–ø–∞–¥–∏—Å—å –Ω–∞ –±–æ–º–±—É</p>
                </div>

                <div class="grid grid-cols-4 gap-2 md:gap-4 max-w-md mx-auto mb-8" id="epstein-grid"></div>

                <div id="epstein-controls" class="text-center">
                    <div class="flex justify-center gap-4 mb-4">
                        <button onclick="setEpsteinBet(1000)" class="bg-zinc-800 px-4 py-2 rounded text-[10px]">1000</button>
                        <button onclick="setEpsteinBet(5000)" class="bg-zinc-800 px-4 py-2 rounded text-[10px]">5000</button>
                    </div>
                    <button id="epstein-start-btn" onclick="startEpstein()" class="bg-red-600 px-8 py-4 rounded-xl font-bold">–ù–ê–ß–ê–¢–¨ (–°—Ç–∞–≤–∫–∞: <span id="e-bet-val">1000</span>)</button>
                    <button id="epstein-cashout-btn" onclick="cashOutEpstein()" class="hidden bg-emerald-600 px-8 py-4 rounded-xl font-bold">–ó–ê–ë–†–ê–¢–¨ <span id="e-win-val">0</span> ‚ÇΩ</button>
                </div>
            </div>
        </div>
    </div>

    <div id="leaderboard-modal" class="fixed inset-0 bg-black/90 flex items-center justify-center hidden z-[100] p-4">
        <div class="bg-zinc-900 border-4 border-pink-500 rounded-3xl p-6 w-full max-w-md">
            <h2 class="text-xl text-center mb-6">TOP PLAYERS</h2>
            <div class="space-y-4 text-[10px] md:text-xs" id="leader-list">
                <div class="flex justify-between border-b border-zinc-700 pb-2">
                    <span>1. MEOWFLOPR</span>
                    <span class="text-emerald-400">999 999 999 ‚ÇΩ</span>
                </div>
            </div>
            <button onclick="closeModal('leaderboard-modal')" class="w-full mt-6 bg-pink-500 py-3 rounded-lg text-black font-bold">–ó–ê–ö–†–´–¢–¨</button>
        </div>
    </div>

    <script>
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let user = {
            username: "–ò–ì–†–û–ö",
            balance: 100000,
            level: 1,
            totalWon: 0
        };

        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤
        const SYMBOLS = [
            { name: 'banana', url: 'https://avatars.mds.yandex.net/get-mpic/5234083/img_id3506543352633991634.png/orig' },
            { name: 'plum', url: 'https://main-cdn.sbermegamarket.ru/big1/hlr-system/-90/257/429/371/118/48/100032397594b0.jpg' },
            { name: 'grape', url: 'https://avatars.mds.yandex.net/get-mpic/5145248/img_id4537599123360367823.png/orig' }
        ];

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä
        let currentBet = 1000;
        let epsteinBet = 1000;
        let epsteinWin = 0;
        let epsteinActive = false;

        let crashMultiplier = 1.0;
        let crashInterval;
        let crashActive = false;

        // --- –°–ò–°–¢–ï–ú–ê –£–í–ï–î–û–ú–õ–ï–ù–ò–ô ---
        function notify(text, color = "#ff00ff") {
            const container = document.getElementById('notification-container');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.style.borderColor = color;
            toast.style.boxShadow = `0 0 15px ${color}`;
            toast.innerHTML = text;
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        // --- –õ–û–ì–ò–ö–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø ---
        function updateUI() {
            document.getElementById('balance').textContent = user.balance.toLocaleString();
            document.getElementById('user-level').textContent = `Lvl ${user.level}`;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–º–æ—á–∫–æ–≤
            document.getElementById('lock-epstein').classList.toggle('hidden', user.level >= 5);
            document.getElementById('game-card-epstein').classList.toggle('locked', user.level < 5);
            
            document.getElementById('lock-crash').classList.toggle('hidden', user.level >= 10);
            document.getElementById('game-card-crash').classList.toggle('locked', user.level < 10);
        }

        function save() {
            localStorage.setItem('meow_user_v2', JSON.stringify(user));
            updateUI();
        }

        function addWin(amount) {
            user.balance += amount;
            user.totalWon += amount;
            user.level = Math.floor(user.totalWon / 50000) + 1;
            notify(`+${amount.toLocaleString()} ‚ÇΩ`, "#10b981");
            save();
        }

        function login() {
            const nick = document.getElementById('username-input').value.trim();
            if (nick) {
                user.username = nick.toUpperCase();
                document.getElementById('login-modal').classList.add('hidden');
                save();
                notify(`–° –í–û–ó–í–†–ê–©–ï–ù–ò–ï–ú, ${user.username}!`);
            }
        }

        // --- –ù–ê–í–ò–ì–ê–¶–ò–Ø ---
        function showSection(id) {
            document.getElementById('home').classList.add('hidden');
            document.getElementById('games').classList.add('hidden');
            document.getElementById(id).classList.remove('hidden');
            window.scrollTo(0,0);
        }

        function closeModal(id) {
            document.getElementById(id).classList.add('hidden');
            if (id === 'mrbeast-modal') stopCrash();
        }

        function showBonus() {
            const last = localStorage.getItem('last_bonus');
            const now = Date.now();
            if (last && now - last < 60000) {
                notify("–ë–û–ù–£–° –ï–©–ï –ù–ï –ì–û–¢–û–í!", "#ef4444");
                return;
            }
            localStorage.setItem('last_bonus', now);
            addWin(5000);
        }

        // ==================== –ò–ì–†–ê: –°–õ–û–¢–´ ====================
        function openSlotsModal() {
            document.getElementById('slots-modal').classList.remove('hidden');
            resetReels();
        }

        function resetReels() {
            [1,2,3].forEach(i => {
                document.getElementById(`reel${i}`).innerHTML = `<img src="${SYMBOLS[0].url}" class="w-16 h-16 md:w-24 md:h-24 object-contain">`;
            });
        }

        function setBet(val) {
            currentBet = val;
            document.getElementById('current-bet').textContent = val;
        }

        function spin() {
            if (user.balance < currentBet) return notify("–ú–ê–õ–û –î–ï–ù–ï–ì!", "#ef4444");
            
            user.balance -= currentBet;
            save();
            
            const btn = document.getElementById('spin-button');
            btn.disabled = true;
            
            let results = [];
            [1,2,3].forEach((id, idx) => {
                let count = 0;
                let timer = setInterval(() => {
                    const randomSym = SYMBOLS[Math.floor(Math.random()*SYMBOLS.length)];
                    document.getElementById(`reel${id}`).innerHTML = `<img src="${randomSym.url}" class="w-16 h-16 md:w-24 md:h-24 object-contain">`;
                    count++;
                    if (count > 10 + idx * 5) {
                        clearInterval(timer);
                        results.push(randomSym.name);
                        if (results.length === 3) checkSlots(results);
                    }
                }, 100);
            });
        }

        function checkSlots(res) {
            document.getElementById('spin-button').disabled = false;
            if (res[0] === res[1] && res[1] === res[2]) {
                addWin(currentBet * 10);
            } else if (res[0] === res[1] || res[1] === res[2] || res[0] === res[2]) {
                addWin(currentBet * 2);
            } else {
                notify("–ü–û–ü–†–û–ë–£–ô –°–ù–û–í–ê", "#666");
            }
        }

        // ==================== –ò–ì–†–ê: –≠–ü–®–¢–ï–ô–ù (MINES) ====================
        function openEpsteinModal() {
            if (user.level < 5) return notify("–ù–£–ñ–ï–ù 5 –£–†–û–í–ï–ù–¨!");
            document.getElementById('epstein-modal').classList.remove('hidden');
            initEpsteinGrid();
        }

        function setEpsteinBet(val) {
            if (epsteinActive) return;
            epsteinBet = val;
            document.getElementById('e-bet-val').textContent = val;
        }

        function initEpsteinGrid() {
            const grid = document.getElementById('epstein-grid');
            grid.innerHTML = '';
            for (let i = 0; i < 16; i++) {
                const cell = document.createElement('div');
                cell.className = "aspect-square bg-zinc-800 rounded-lg flex items-center justify-center cursor-pointer text-xl border border-zinc-700";
                cell.innerHTML = "?";
                cell.onclick = () => revealEpstein(cell, i);
                grid.appendChild(cell);
            }
        }

        let mines = [];
        function startEpstein() {
            if (user.balance < epsteinBet) return notify("–ú–ê–õ–û –î–ï–ù–ï–ì!");
            user.balance -= epsteinBet;
            save();
            
            epsteinActive = true;
            epsteinWin = epsteinBet;
            mines = Array(16).fill(false);
            let mCount = 0;
            while(mCount < 3) {
                let r = Math.floor(Math.random()*16);
                if (!mines[r]) { mines[r] = true; mCount++; }
            }
            
            document.getElementById('epstein-start-btn').classList.add('hidden');
            document.getElementById('epstein-cashout-btn').classList.remove('hidden');
            document.getElementById('e-win-val').textContent = epsteinWin;
            initEpsteinGrid();
        }

        function revealEpstein(cell, idx) {
            if (!epsteinActive || cell.classList.contains('revealed')) return;
            
            cell.classList.add('revealed');
            if (mines[idx]) {
                cell.innerHTML = "üí•";
                cell.classList.add('bg-red-600');
                notify("–ë–£–ú! –í–´ –ü–†–û–ò–ì–†–ê–õ–ò", "#ef4444");
                endEpstein();
            } else {
                epsteinWin = Math.floor(epsteinWin * 1.3);
                cell.innerHTML = "üçì";
                cell.classList.add('bg-emerald-600');
                document.getElementById('e-win-val').textContent = epsteinWin;
            }
        }

        function endEpstein() {
            epsteinActive = false;
            document.getElementById('epstein-start-btn').classList.remove('hidden');
            document.getElementById('epstein-cashout-btn').classList.add('hidden');
        }

        function cashOutEpstein() {
            addWin(epsteinWin);
            endEpstein();
        }

        // ==================== –ò–ì–†–ê: MR BEAST (CRASH) ====================
        let crashCanvas, crashCtx;
        let crashPoint = 0;

        function openMrBeastModal() {
            if (user.level < 10) return notify("–ù–£–ñ–ï–ù 10 –£–†–û–í–ï–ù–¨!");
            document.getElementById('mrbeast-modal').classList.remove('hidden');
            initCrashCanvas();
        }

        function initCrashCanvas() {
            crashCanvas = document.getElementById('crash-canvas');
            crashCtx = crashCanvas.getContext('2d');
            crashCanvas.width = crashCanvas.offsetWidth;
            crashCanvas.height = crashCanvas.offsetHeight;
            crashCtx.clearRect(0,0,crashCanvas.width, crashCanvas.height);
        }

        function startCrash() {
            const bet = parseInt(document.getElementById('crash-bet-input').value);
            if (user.balance < bet) return notify("–ú–ê–õ–û –î–ï–ù–ï–ì!");
            
            user.balance -= bet;
            save();
            
            crashActive = true;
            crashMultiplier = 1.0;
            // –õ–æ–≥–∏–∫–∞: —Ç–æ—á–∫–∞ –≤–∑—Ä—ã–≤–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ, –Ω–æ –∏–≥—Ä–æ–∫ –µ—ë –Ω–µ –∑–Ω–∞–µ—Ç
            let r = Math.random();
            if (r < 0.1) crashPoint = 1.0; // –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –≤–∑—Ä—ã–≤
            else if (r < 0.5) crashPoint = 1.1 + Math.random() * 2;
            else if (r < 0.8) crashPoint = 2 + Math.random() * 5;
            else crashPoint = 5 + Math.random() * 20;

            document.getElementById('start-crash-btn').classList.add('hidden');
            document.getElementById('cashout-crash-btn').classList.remove('hidden');
            
            crashInterval = setInterval(updateCrash, 50);
        }

        function updateCrash() {
            crashMultiplier += 0.01 + (crashMultiplier * 0.005);
            document.getElementById('live-multiplier').textContent = crashMultiplier.toFixed(2);
            document.getElementById('crash-multiplier-display').textContent = crashMultiplier.toFixed(2) + "x";
            document.getElementById('crash-multiplier-display').style.color = "#22d3ee";

            // –ê–Ω–∏–º–∞—Ü–∏—è —Ä–∞–∫–µ—Ç—ã
            const rocket = document.getElementById('rocket-icon');
            let progress = Math.min(crashMultiplier / 10, 1);
            rocket.style.left = (10 + progress * 70) + "%";
            rocket.style.bottom = (10 + progress * 70) + "%";

            if (crashMultiplier >= crashPoint) {
                explodeCrash();
            }
        }

        function explodeCrash() {
            clearInterval(crashInterval);
            crashActive = false;
            document.getElementById('crash-multiplier-display').textContent = "BOOM!";
            document.getElementById('crash-multiplier-display').style.color = "#ef4444";
            notify("–†–ê–ö–ï–¢–ê –í–ó–û–†–í–ê–õ–ê–°–¨!", "#ef4444");
            
            setTimeout(() => {
                document.getElementById('start-crash-btn').classList.remove('hidden');
                document.getElementById('cashout-crash-btn').classList.add('hidden');
            }, 2000);
        }

        function cashOutCrash() {
            if (!crashActive) return;
            const bet = parseInt(document.getElementById('crash-bet-input').value);
            const win = Math.floor(bet * crashMultiplier);
            addWin(win);
            stopCrash();
        }

        function stopCrash() {
            clearInterval(crashInterval);
            crashActive = false;
            document.getElementById('start-crash-btn').classList.remove('hidden');
            document.getElementById('cashout-crash-btn').classList.add('hidden');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞
        window.onload = () => {
            const saved = localStorage.getItem('meow_user_v2');
            if (saved) user = JSON.parse(saved);
            else document.getElementById('login-modal').classList.remove('hidden');
            
            updateUI();
            showSection('home');
        };
    </script>
</body>
</html>
